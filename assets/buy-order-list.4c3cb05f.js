import{u as N,h as A}from"./tab.bddd1992.js";import{aZ as K,bg as F,U as I,ad as U,o as p,W as O,w as a,a as e,e as s,i as d,a0 as _,$ as y,c as v,F as C,a4 as k,bh as g,bi as W,a3 as B,b as o,bj as j,bk as H,a$ as M,b3 as Q,b4 as X,X as q,bl as T,k as $,Y as S,_ as E,l as Y,T as h,t as m,m as P}from"./index.07e8aedc.js";import{u as R}from"./report.3a54d38d.js";import{u as Z}from"./sellsOrders.95075bcb.js";import{V as w}from"./VAutocomplete.7f33ebd6.js";import{u as D}from"./buyOrders.65cbffd5.js";import{V as G,a as J,b as ee,c as te}from"./VWindowItem.f521c7cb.js";import"./moment.9709ab41.js";import"./VSelect.11a02996.js";import"./VCheckboxBtn.fcbe5789.js";const le={__name:"BuyItemInput",props:["item"],setup(V){const t=V,r=Z(),u=K();F(r);const l=I(t.item.product_id),c=I(t.item.quantity),b=I(t.item.unit_price),x=I(t.item.total_price);return U(l,(n,i)=>{if(n){let f=u.productList.find(z=>z.product_id===n);r.updateItem.product_id=n,r.updateItem.quantity=c.value,r.updateItem.unit_price=f.selling_price,r.updateItem.total_price=f.selling_price,x.value=f.selling_price,b.value=f.selling_price,r.updateEditProductData()}}),U(c,n=>{if(n){r.updateItem.quantity=n;let i=r.updateItem.quantity*r.updateItem.unit_price;r.updateItem.total_price=i,r.updateEditProductData(),x.value=i}}),U(b,n=>{n&&(r.updateItem.unit_price=n,r.updateItem.total_price=r.updateItem.quantity*r.updateItem.unit_price,r.updateEditProductData(),x.value=r.updateItem.total_price)}),U(x,n=>{n&&(r.updateItem.unit_price=n/r.updateItem.quantity,r.updateItem.total_price=n,b.value=n/r.updateItem.quantity,r.updateEditProductData())}),(n,i)=>(p(),O(y,null,{default:a(()=>[e(s,{cols:"12",lg:"3"},{default:a(()=>[e(w,{modelValue:l.value,"onUpdate:modelValue":i[0]||(i[0]=f=>l.value=f),items:d(u).getProductsSelect,class:"centered-input",label:"Product",variant:"underlined",onUpdate:i[1]||(i[1]=f=>n.alert("Hello"))},null,8,["modelValue","items"])]),_:1}),e(s,{cols:"12",lg:"2"},{default:a(()=>[e(_,{modelValue:c.value,"onUpdate:modelValue":i[2]||(i[2]=f=>c.value=f),label:"Quantity",placeholder:"Quantity",variant:"underlined",class:"centered-input"},null,8,["modelValue"])]),_:1}),e(s,{cols:"12",lg:"3"},{default:a(()=>[e(_,{modelValue:b.value,"onUpdate:modelValue":i[3]||(i[3]=f=>b.value=f),label:"Price",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(s,{cols:"12",lg:"3"},{default:a(()=>[e(_,{modelValue:x.value,"onUpdate:modelValue":i[4]||(i[4]=f=>x.value=f),label:"Subtotal",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(s,{cols:"12",lg:"1"})]),_:1}))}},ae={__name:"BuyOrderItem",setup(V){const t=D();return(r,u)=>(p(),O(g,null,{default:a(()=>[(p(!0),v(C,null,k(d(t).updateOrder.items,(l,c)=>(p(),O(le,{key:c,item:l,onClick:b=>d(t).selectedUpdateOrderItem=l.item_id},null,8,["item","onClick"]))),128))]),_:1}))}};const L=V=>(j("data-v-3e8c98bd"),V=V(),H(),V),de={class:"text-center"},oe={class:"text-center"},ue={class:"text-center"},re={class:"text-center"},ne=L(()=>o("td",null,"Total",-1)),se={class:"text-center"},ce=L(()=>o("td",null,"Pay",-1)),ie={class:"text-center"},pe=L(()=>o("td",null,"Balance",-1)),me={class:"text-center"},_e={__name:"BuySubtotal",setup(V){const t=D();return(r,u)=>(p(),O(y,{class:"pa-x ma-x"},{default:a(()=>[e(s,{md:"6",lg:"8",cols:"12",class:"pa-x ma-x"},{default:a(()=>[e(B,null,{default:a(()=>[o("tbody",null,[o("tr",null,[o("td",de,[e(_,{modelValue:d(t).updateOrder.subtotal,"onUpdate:modelValue":u[0]||(u[0]=l=>d(t).updateOrder.subtotal=l),type:"number",variant:"underlined",class:"centered-input",label:"Subtotal",readonly:""},null,8,["modelValue"])]),o("td",oe,[e(_,{modelValue:d(t).updateOrder.labour,"onUpdate:modelValue":u[1]||(u[1]=l=>d(t).updateOrder.labour=l),onKeyup:u[2]||(u[2]=l=>d(t).updateEditProductData()),type:"number",variant:"underlined",class:"centered-input",label:"Labour"},null,8,["modelValue"])]),o("td",ue,[e(_,{modelValue:d(t).updateOrder.discount,"onUpdate:modelValue":u[3]||(u[3]=l=>d(t).updateOrder.discount=l),onKeyup:u[4]||(u[4]=l=>d(t).updateEditProductData()),type:"number",class:"centered-input",variant:"underlined",label:"Discount"},null,8,["modelValue"])]),o("td",re,[e(_,{modelValue:d(t).updateOrder.collection,"onUpdate:modelValue":u[5]||(u[5]=l=>d(t).updateOrder.collection=l),onKeyup:u[6]||(u[6]=l=>d(t).updateEditProductData()),type:"number",class:"centered-input",variant:"underlined",label:"Collection"},null,8,["modelValue"])])])])]),_:1})]),_:1}),e(s,{md:"6",lg:"4",cols:"12"},{default:a(()=>[e(B,null,{default:a(()=>[o("tbody",null,[o("tr",null,[ne,o("td",se,[e(_,{modelValue:d(t).updateOrder.total,"onUpdate:modelValue":u[7]||(u[7]=l=>d(t).updateOrder.total=l),type:"number",placeholder:"Discount",variant:"solo-filled",class:"centered-input",readonly:""},null,8,["modelValue"])])]),o("tr",null,[ce,o("td",ie,[e(_,{modelValue:d(t).updateOrder.pay,"onUpdate:modelValue":u[8]||(u[8]=l=>d(t).updateOrder.pay=l),onKeyup:u[9]||(u[9]=l=>d(t).updateEditBalance()),type:"number",placeholder:"Pay",variant:"solo-filled",class:"centered-input"},null,8,["modelValue"])])]),o("tr",null,[pe,o("td",me,[e(_,{modelValue:d(t).updateOrder.balance,"onUpdate:modelValue":u[10]||(u[10]=l=>d(t).updateOrder.balance=l),type:"number",placeholder:"Discount",variant:"solo-filled",class:"centered-input",readonly:""},null,8,["modelValue"])])])])]),_:1})]),_:1})]),_:1}))}},fe=W(_e,[["__scopeId","data-v-3e8c98bd"]]),be={__name:"UpdateBuyOrder",props:["ordercode"],setup(V){const t=D();R();const r=I([]);return M(async()=>{let u=await Q.get(X.getVendor);r.value=u.data.data.map(l=>({title:l.name,value:l.vendor_id}))}),(u,l)=>(p(),O(y,null,{default:a(()=>[e(s,{md:"6",lg:"12",cols:"12"},{default:a(()=>[e(q,null,{default:a(()=>[e(y,{"no-gutters":""},{default:a(()=>[e(s,{cols:"12",sm:"8",md:"12",lg:"6",order:"2","order-lg":"1"},{default:a(()=>[e(g,null,{default:a(()=>[e(T,null,{default:a(()=>[$("Customer")]),_:1})]),_:1}),e(S,null,{default:a(()=>[e(y,null,{default:a(()=>[e(s,{cols:"12",md:"6"},{default:a(()=>[e(w,{modelValue:d(t).updateOrder.vendor_id,"onUpdate:modelValue":l[0]||(l[0]=c=>d(t).updateOrder.vendor_id=c),items:r.value,label:"Customer Name",placeholder:"Customer Name"},null,8,["modelValue","items"])]),_:1}),e(s,{cols:"12",md:"6"},{default:a(()=>[e(_,{modelValue:d(t).updateOrder.customer_contact,"onUpdate:modelValue":l[1]||(l[1]=c=>d(t).updateOrder.customer_contact=c),label:"Contact No",placeholder:"Contact No"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(s,{cols:"12",sm:"4",md:"12",lg:"6",order:"1","order-lg":"2"},{default:a(()=>[e(g,null,{default:a(()=>[e(T,null,{default:a(()=>[$("Order")]),_:1})]),_:1}),e(S,null,{default:a(()=>[e(y,null,{default:a(()=>[e(s,{cols:"12",md:"6"},{default:a(()=>[e(_,{modelValue:d(t).updateOrder.order_code,"onUpdate:modelValue":l[2]||(l[2]=c=>d(t).updateOrder.order_code=c),label:"Order No",placeholder:"Order No",readonly:""},null,8,["modelValue"])]),_:1}),e(s,{cols:"12",md:"6"},{default:a(()=>[e(_,{modelValue:d(t).updateOrder.order_date,"onUpdate:modelValue":l[3]||(l[3]=c=>d(t).updateOrder.order_date=c),label:"Order Date",placeholder:"Order Date",type:"date"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(g,null,{default:a(()=>[e(T,null,{default:a(()=>[$("Items")]),_:1})]),_:1}),e(S,null,{default:a(()=>[e(E)]),_:1}),e(ae),e(g,null,{default:a(()=>[e(Y,{block:"",onClick:l[4]||(l[4]=c=>d(t).addUpdateProductItem())},{default:a(()=>[e(h,{size:"2rem",icon:"material-symbols:add-circle-outline-rounded"})]),_:1})]),_:1}),e(g,null,{default:a(()=>[e(fe)]),_:1}),e(g,null,{default:a(()=>[e(y,{class:"pa-x ma-x"},{default:a(()=>[e(s,{md:"6",lg:"8",cols:"12",class:"pa-x ma-x"}),e(s,{md:"6",lg:"4",cols:"12"},{default:a(()=>[e(y,null,{default:a(()=>[e(s,{md:"12",lg:"12",cols:"12",class:"text-center"})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},Ve=o("thead",null,[o("tr",null,[o("th",{class:"text-uppercase"}," Order ID "),o("th",{class:"text-center text-uppercase"}," Vendor Name "),o("th",{class:"text-center text-uppercase"}," Total Item "),o("th",{class:"text-center text-uppercase"}," Order Amount "),o("th",{class:"text-center text-uppercase"}," Charge "),o("th",{class:"text-center text-uppercase"}," Payable Amount "),o("th",{class:"text-center text-uppercase"}," Paid "),o("th",{class:"text-center text-uppercase"}," Balance "),o("th",{class:"text-center text-uppercase"}," Action ")])],-1),ye={class:"text-center"},xe={class:"text-center"},ve={class:"text-center"},Oe={class:"text-center"},ge={class:"text-center"},Ie={class:"text-center"},$e={class:"text-center"},Ue={class:"text-center"},Te=o("td",{colspan:"2",class:"text-center"}," Total ",-1),Ce={class:"text-center"},ke={class:"text-center"},he={class:"text-center"},De={class:"text-center"},Se={class:"text-center"},Be={class:"text-center"},Le={__name:"BuyOrderList",setup(V){const t=R(),r=N(),u=D();async function l(b){await u.addUpdateOrder(b.order_code),await r.addTab({id:b.order_code,name:b.vendor_name})}function c(){t.getBuyOrderList()}return t.getBuyOrderList(),(b,x)=>(p(),O(y,{justify:"center"},{default:a(()=>[e(s,{cols:"12"},{default:a(()=>[e(q,null,{default:a(()=>[e(T,null,{default:a(()=>[e(y,null,{default:a(()=>[e(s,{cols:"8"},{default:a(()=>[$(" Order list ")]),_:1}),e(s,{cols:"4"},{default:a(()=>[e(_,{modelValue:d(t).buyReportDate,"onUpdate:modelValue":x[0]||(x[0]=n=>d(t).buyReportDate=n),label:"Order Date",placeholder:"Order Date",type:"date",onChange:c},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(B,null,{default:a(()=>[Ve,o("tbody",null,[(p(!0),v(C,null,k(d(t).buyOrderList.items,n=>(p(),v("tr",{key:n.order_code},[o("td",null,m(n.order_code),1),o("td",ye,m(n.vendor_name),1),o("td",xe,m(n.order_qty),1),o("td",ve,m(n.order_amount),1),o("td",Oe,m(n.charge),1),o("td",ge,m(n.payable_amount),1),o("td",Ie,m(n.paid),1),o("td",$e,m(n.balance),1),o("td",Ue,[e(h,{size:"1.5rem",icon:"tabler:edit",onClick:i=>l(n)},null,8,["onClick"]),e(h,{size:"1.5rem",icon:"ep:close-bold",onClick:i=>d(u).removeOrder(n.purchase_order_id)},null,8,["onClick"])])]))),128)),o("tr",null,[Te,o("td",Ce,m(d(t).buyOrderList.total_order_qty),1),o("td",ke,m(d(t).buyOrderList.total_order_amount),1),o("td",he,m(d(t).buyOrderList.total_charge),1),o("td",De,m(d(t).buyOrderList.total_payable_amount),1),o("td",Se,m(d(t).buyOrderList.total_paid),1),o("td",Be,m(d(t).buyOrderList.total_balance),1)])])]),_:1})]),_:1})]),_:1})]),_:1}))}},Pe={key:0},Ne={key:1},qe={__name:"buy-order-list",setup(V){const t=N();return t.tabs=[],t.addTab({id:A.randomNumber(),name:"Buy Order List",componentType:"main"}),(r,u)=>(p(),v("div",null,[e(J,{modelValue:d(t).selectedTab,"onUpdate:modelValue":u[0]||(u[0]=l=>d(t).selectedTab=l),"show-arrows":""},{default:a(()=>[(p(!0),v(C,null,k(d(t).tabs,l=>(p(),O(G,{key:l.id,value:l.id},{default:a(()=>[e(h,{size:"20",start:"",icon:"la:list-alt"}),$(" "+m(l.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),e(E),e(te,{modelValue:d(t).selectedTab,"onUpdate:modelValue":u[1]||(u[1]=l=>d(t).selectedTab=l),class:"mt-5 disable-tab-transition",touch:!1},{default:a(()=>[(p(!0),v(C,null,k(d(t).tabs,l=>(p(),O(ee,{key:l.id,value:l.id},{default:a(()=>[l.componentType=="main"?(p(),v("div",Pe,[e(Le)])):(p(),v("div",Ne,[e(be,{ordercode:l.id},null,8,["ordercode"])]))]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]))}};typeof P=="function"&&P(qe);export{qe as default};
