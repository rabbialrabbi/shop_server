import{i as ue,aM as oe,v as de,a_ as ne,x as L,aN as re,ab as se,aO as ie,aP as ce,P as g,a as e,ah as I,a$ as pe,b0 as me,aQ as _e,aW as h,aX as R,aY as M,aa as F,o as x,Q as k,w as t,e as l,R as Q,S as z,Z as E,W as f,b1 as O,O as P,Y as C,X as y,aZ as b,b2 as W,b3 as Y,aV as ve,c as j,b as m,F as $,a0 as ye,t as U,ap as B,aw as N,N as fe,$ as Ve}from"./index.71bb308e.js";import"./moment.9709ab41.js";import{V as Z}from"./VForm.8db8822f.js";import{V as T}from"./VAutocomplete.7737ec6c.js";import{V as G}from"./VTextarea.55fb047c.js";import{a as be,b as ge,c as Ue}from"./VCheckboxBtn.b2e8ef07.js";import{V as xe}from"./VDialog.938b4e5e.js";const H=ue({name:"VSwitch",inheritAttrs:!1,props:{indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...oe(),...be()},emits:{"update:indeterminate":c=>!0},setup(c,_){let{attrs:s,slots:o}=_;const i=de(c,"indeterminate"),{loaderClasses:V}=ne(c),a=L(()=>typeof c.loading=="string"&&c.loading!==""?c.loading:c.color),p=re(),d=L(()=>c.id||`switch-${p}`);function n(){i.value&&(i.value=!1)}return se(()=>{const[q,v]=ie(s),[u,r]=ce(c),[J,je]=ge(c),D=g();function K(){var S,w;(S=D.value)==null||(w=S.input)==null||w.click()}return e(_e,I({class:["v-switch",{"v-switch--inset":c.inset},{"v-switch--indeterminate":i.value},V.value]},q,u,{id:d.value}),{...o,default:S=>{let{id:w,isDisabled:X,isReadonly:ee,isValid:te}=S;return e(Ue,I({ref:D},J,{id:w.value,type:"checkbox","onUpdate:modelValue":n,"aria-checked":i.value?"mixed":void 0,disabled:X.value,readonly:ee.value},v),{...o,default:()=>e("div",{class:"v-switch__track",onClick:K},null),input:le=>{let{textColorClasses:ae}=le;return e("div",{class:["v-switch__thumb",ae.value]},[c.loading&&e(pe,{name:"v-switch",active:!0,color:te.value===!1?void 0:a.value},{default:A=>o.loader?o.loader(A):e(me,{active:A.isActive,color:A.color,indeterminate:!0,size:"16",width:"2"},null)})])}})}})}),{}}}),Ne={__name:"AddProduct",setup(c){h();const _=R();M(async()=>{await _.updateCategoryList(),await _.updateProductTypeList(),await _.updateUnitTypeList()});const s={name:null,category_id:null,product_type_id:null,unit_amount:null,unit_id:null,description:null,selling_price:null,cost_adjust_type:!0,cost:null,available_qty:null,reserved_qty:null,in_transit_qty:null},o=g(structuredClone(s)),i=g(),V=g([]);F(i,p=>{let d=_.productTypes;o.value.category_id=p,d=d.filter(n=>n.category_id===p),d=d.map(n=>({title:n.name,value:n.product_type_id})),V.value=d});const a=async()=>{try{const p=await W.post(Y.createProduct,o.value);console.log(p.data),p.data.status&&(o.value=g(structuredClone(s)),i.value=null)}catch(p){console.log(p)}};return(p,d)=>(x(),k(f,{justify:"center"},{default:t(()=>[e(l,{cols:"12",md:"10"},{default:t(()=>[e(Q,{title:"Add Product"},{default:t(()=>[e(z,null,{default:t(()=>[e(Z,{onSubmit:d[12]||(d[12]=E(()=>{},["prevent"]))},{default:t(()=>[e(f,null,{default:t(()=>[e(l,{cols:"12",md:"2"},{default:t(()=>[e(O,{width:"100%",src:"https://images.pexels.com/photos/90946/pexels-photo-90946.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"}),e(P,{justify:"center",width:"100%",class:"mt-3"},{default:t(()=>[C(" Upload ")]),_:1})]),_:1}),e(l,{cols:"12",md:"5"},{default:t(()=>[e(l,{cols:"12"},{default:t(()=>[e(y,{modelValue:o.value.name,"onUpdate:modelValue":d[0]||(d[0]=n=>o.value.name=n),label:"Product Name",placeholder:"Product Name",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(l,{cols:"12"},{default:t(()=>[e(T,{modelValue:i.value,"onUpdate:modelValue":d[1]||(d[1]=n=>i.value=n),items:b(_).getCategoriesSelect,label:"Category",placeholder:"Category",variant:"underlined"},null,8,["modelValue","items"])]),_:1}),e(l,{cols:"12"},{default:t(()=>[e(T,{modelValue:o.value.product_type_id,"onUpdate:modelValue":d[2]||(d[2]=n=>o.value.product_type_id=n),items:V.value,label:"Product Type",placeholder:"Product Type",variant:"underlined"},null,8,["modelValue","items"])]),_:1}),e(l,{cols:"12"},{default:t(()=>[e(f,null,{default:t(()=>[e(l,{cols:"6"},{default:t(()=>[e(y,{modelValue:o.value.unit_amount,"onUpdate:modelValue":d[3]||(d[3]=n=>o.value.unit_amount=n),label:"Unit Amount",placeholder:"Unit Amount",variant:"underlined",type:"number"},null,8,["modelValue"])]),_:1}),e(l,{cols:"6"},{default:t(()=>[e(T,{modelValue:o.value.unit_id,"onUpdate:modelValue":d[4]||(d[4]=n=>o.value.unit_id=n),items:b(_).getUnitTypeSelect,label:"Unit Type",placeholder:"Unit Type",variant:"underlined"},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1}),e(l,{cols:"12"},{default:t(()=>[e(G,{modelValue:o.value.description,"onUpdate:modelValue":d[5]||(d[5]=n=>o.value.description=n),label:"Description",placeholder:"Description",variant:"underlined"},null,8,["modelValue"])]),_:1})]),_:1}),e(l,{cols:"12",md:"5"},{default:t(()=>[e(l,{cols:"12"},{default:t(()=>[e(f,null,{default:t(()=>[e(l,{cols:"6"},{default:t(()=>[e(y,{modelValue:o.value.selling_price,"onUpdate:modelValue":d[6]||(d[6]=n=>o.value.selling_price=n),label:"Selling Price",placeholder:"Selling Price",variant:"underlined",type:"number"},null,8,["modelValue"])]),_:1}),e(l,{cols:"6"},{default:t(()=>[e(H,{modelValue:o.value.cost_adjust_type,"onUpdate:modelValue":d[7]||(d[7]=n=>o.value.cost_adjust_type=n),label:"Adjust",variant:"underlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(l,{cols:"12"},{default:t(()=>[e(f,null,{default:t(()=>[e(l,{cols:"6"},{default:t(()=>[e(y,{modelValue:o.value.cost,"onUpdate:modelValue":d[8]||(d[8]=n=>o.value.cost=n),label:"Cost",placeholder:"Cost",variant:"underlined",type:"number"},null,8,["modelValue"])]),_:1}),e(l,{cols:"6"},{default:t(()=>[e(y,{modelValue:o.value.available_qty,"onUpdate:modelValue":d[9]||(d[9]=n=>o.value.available_qty=n),label:"Available Qty",placeholder:"Available Qty",variant:"underlined",type:"number"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(l,{cols:"12"},{default:t(()=>[e(f,null,{default:t(()=>[e(l,{cols:"6"},{default:t(()=>[e(y,{modelValue:o.value.reserved_qty,"onUpdate:modelValue":d[10]||(d[10]=n=>o.value.reserved_qty=n),label:"Reserved Qty",placeholder:"Reserved Qty",variant:"underlined",type:"number"},null,8,["modelValue"])]),_:1}),e(l,{cols:"6"},{default:t(()=>[e(y,{modelValue:o.value.in_transit_qty,"onUpdate:modelValue":d[11]||(d[11]=n=>o.value.in_transit_qty=n),label:"In Transit Qty",placeholder:"In Transit Qty",variant:"underlined",type:"number"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(l,{cols:"12",class:"d-flex gap-4"},{default:t(()=>[e(P,{type:"submit",onClick:a},{default:t(()=>[C(" Submit ")]),_:1}),e(P,{type:"reset",color:"secondary",variant:"tonal"},{default:t(()=>[C(" Reset ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},Pe={__name:"ProductEdit",props:["product"],setup(c){const _=c;let s=_.product;const o=h(),i=R();M(async()=>{await i.updateCategoryList(),await i.updateProductTypeList(),await i.updateUnitTypeList()});const V={name:s.name,category_id:s.category_id,product_type_id:s.product_type_id,unit_amount:s.unit_amount,unit_id:s.unit_id,description:s.description,selling_price:s.selling_price,cost_adjust_type:s.cost_adjust_type==1,cost:s.cost,available_qty:s.available_qty,reserved_qty:s.reserved_qty,in_transit_qty:s.in_transit_qty},a=g(structuredClone(V)),p=g(V.category_id),n=g((()=>{let v=i.productTypes;return v=v.filter(u=>u.category_id===p.value),v=v.map(u=>({title:u.name,value:u.product_type_id})),v})());F(p,v=>{let u=i.productTypes;a.value.category_id=v,u=u.filter(r=>r.category_id===v),u=u.map(r=>({title:r.name,value:r.product_type_id})),a.value.product_type_id=null,n.value=u});const q=async()=>{try{const v=Y.editProduct+"/"+_.product.product_id,u=await W.put(v,a.value);await o.updateProductList(),o.editModalStatus=!1}catch(v){console.log(v)}};return(v,u)=>(x(),k(f,{justify:"center"},{default:t(()=>[e(l,{cols:"12",md:"10"},{default:t(()=>[e(Q,{title:"Add Product"},{default:t(()=>[e(z,null,{default:t(()=>[e(Z,{onSubmit:u[12]||(u[12]=E(()=>{},["prevent"]))},{default:t(()=>[e(f,null,{default:t(()=>[e(l,{cols:"12",md:"2"},{default:t(()=>[e(O,{width:"100%",src:"https://images.pexels.com/photos/90946/pexels-photo-90946.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"}),e(P,{justify:"center",width:"100%",class:"mt-3"},{default:t(()=>[C(" Upload ")]),_:1})]),_:1}),e(l,{cols:"12",md:"5"},{default:t(()=>[e(l,{cols:"12"},{default:t(()=>[e(y,{modelValue:a.value.name,"onUpdate:modelValue":u[0]||(u[0]=r=>a.value.name=r),label:"Product Name",placeholder:"Product Name",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(l,{cols:"12"},{default:t(()=>[e(T,{modelValue:p.value,"onUpdate:modelValue":u[1]||(u[1]=r=>p.value=r),items:b(i).getCategoriesSelect,label:"Category",placeholder:"Category",variant:"underlined"},null,8,["modelValue","items"])]),_:1}),e(l,{cols:"12"},{default:t(()=>[e(T,{modelValue:a.value.product_type_id,"onUpdate:modelValue":u[2]||(u[2]=r=>a.value.product_type_id=r),items:n.value,label:"Product Type",placeholder:"Product Type",variant:"underlined"},null,8,["modelValue","items"])]),_:1}),e(l,{cols:"12"},{default:t(()=>[e(f,null,{default:t(()=>[e(l,{cols:"6"},{default:t(()=>[e(y,{modelValue:a.value.unit_amount,"onUpdate:modelValue":u[3]||(u[3]=r=>a.value.unit_amount=r),label:"Unit Amount",placeholder:"Unit Amount",variant:"underlined",type:"number"},null,8,["modelValue"])]),_:1}),e(l,{cols:"6"},{default:t(()=>[e(T,{modelValue:a.value.unit_id,"onUpdate:modelValue":u[4]||(u[4]=r=>a.value.unit_id=r),items:b(i).getUnitTypeSelect,label:"Unit Type",placeholder:"Unit Type",variant:"underlined"},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1}),e(l,{cols:"12"},{default:t(()=>[e(G,{modelValue:a.value.description,"onUpdate:modelValue":u[5]||(u[5]=r=>a.value.description=r),label:"Description",placeholder:"Description",variant:"underlined"},null,8,["modelValue"])]),_:1})]),_:1}),e(l,{cols:"12",md:"5"},{default:t(()=>[e(l,{cols:"12"},{default:t(()=>[e(f,null,{default:t(()=>[e(l,{cols:"6"},{default:t(()=>[e(y,{modelValue:a.value.selling_price,"onUpdate:modelValue":u[6]||(u[6]=r=>a.value.selling_price=r),label:"Selling Price",placeholder:"Selling Price",variant:"underlined",type:"number"},null,8,["modelValue"])]),_:1}),e(l,{cols:"6"},{default:t(()=>[e(H,{modelValue:a.value.cost_adjust_type,"onUpdate:modelValue":u[7]||(u[7]=r=>a.value.cost_adjust_type=r),label:"Adjust",variant:"underlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(l,{cols:"12"},{default:t(()=>[e(f,null,{default:t(()=>[e(l,{cols:"6"},{default:t(()=>[e(y,{modelValue:a.value.cost,"onUpdate:modelValue":u[8]||(u[8]=r=>a.value.cost=r),label:"Cost",placeholder:"Cost",variant:"underlined",type:"number"},null,8,["modelValue"])]),_:1}),e(l,{cols:"6"},{default:t(()=>[e(y,{modelValue:a.value.available_qty,"onUpdate:modelValue":u[9]||(u[9]=r=>a.value.available_qty=r),label:"Available Qty",placeholder:"Available Qty",variant:"underlined",type:"number"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(l,{cols:"12"},{default:t(()=>[e(f,null,{default:t(()=>[e(l,{cols:"6"},{default:t(()=>[e(y,{modelValue:a.value.reserved_qty,"onUpdate:modelValue":u[10]||(u[10]=r=>a.value.reserved_qty=r),label:"Reserved Qty",placeholder:"Reserved Qty",variant:"underlined",type:"number"},null,8,["modelValue"])]),_:1}),e(l,{cols:"6"},{default:t(()=>[e(y,{modelValue:a.value.in_transit_qty,"onUpdate:modelValue":u[11]||(u[11]=r=>a.value.in_transit_qty=r),label:"In Transit Qty",placeholder:"In Transit Qty",variant:"underlined",type:"number"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(l,{cols:"12",class:"d-flex gap-4"},{default:t(()=>[e(P,{type:"submit",onClick:q},{default:t(()=>[C(" Submit ")]),_:1}),e(P,{type:"reset",color:"secondary",variant:"tonal"},{default:t(()=>[C(" Reset ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},Ce=m("thead",null,[m("tr",null,[m("th",{class:"text-uppercase"}," Name "),m("th",{class:"text-center text-uppercase"}," Product Type "),m("th",{class:"text-center text-uppercase"}," Quantity "),m("th",{class:"text-center text-uppercase"}," Selling Price "),m("th",{class:"text-center text-uppercase"}," Cost "),m("th",{class:"text-center text-uppercase"}," Action ")])],-1),Te={class:"text-center"},Se={class:"text-center"},we={class:"text-center"},he={class:"text-center"},qe={class:"text-center"},Ae={__name:"ProductTable",setup(c){let _=ve();const s=h();g(!1);const o=g(null);return(i,V)=>(x(),j($,null,[e(Ve,null,{default:t(()=>[Ce,m("tbody",null,[(x(!0),j($,null,ye(b(s).productList,a=>(x(),j("tr",{key:a.product_id},[m("td",null,U(a.name)+" - "+U(a.unit_amount)+U(a.unit),1),m("td",Te,U(a.product_type),1),m("td",Se,U(a.available_qty),1),m("td",we,U(a.selling_price),1),m("td",he,[B(m("span",null,U(a.cost),513),[[N,b(_).can("product-cost-view")]])]),m("td",qe,[B(e(fe,{size:"20",start:"",icon:"tabler:edit",onClick:p=>{o.value=a,b(s).editModalStatus=!0}},null,8,["onClick"]),[[N,b(_).can("product-edit")]])])]))),128))])]),_:1}),e(xe,{modelValue:b(s).editModalStatus,"onUpdate:modelValue":V[0]||(V[0]=a=>b(s).editModalStatus=a),width:"auto"},{default:t(()=>[e(Pe,{product:o.value},null,8,["product"])]),_:1},8,["modelValue"])],64))}},Re={__name:"ProductList",setup(c){return h(),(_,s)=>(x(),k(f,{justify:"center"},{default:t(()=>[e(l,{cols:"12"},{default:t(()=>[e(Q,{title:"Basic"},{default:t(()=>[e(Ae)]),_:1})]),_:1})]),_:1}))}};export{Ne as _,Re as a};
