import{u as D,h as E,_ as W}from"./UpdateOrder.17453911.js";import{aV as w,bx as N,o as s,Q as f,w as t,a as e,e as c,R as T,S as U,Z as M,W as x,X as $,c as i,F as _,a0 as V,aZ as n,O as L,Y as v,b2 as A,b3 as F,P as g,aY as I,bf as Y,N as R,$ as Z,b as p,t as S,bt as O,bu as Q,U as X,a3 as C}from"./index.71bb308e.js";import"./moment.9709ab41.js";import"./users.bf130c3e.js";import B from"./PermissionGroup.9b3fe5a6.js";import{V as P}from"./VForm.8db8822f.js";import{V as j}from"./VCheckbox.99425c1a.js";import{V as h}from"./VDialog.938b4e5e.js";import{V as q,a as G,b as H,c as J}from"./VWindowItem.6c27eed5.js";import"./report.7bf3eefe.js";import"./sellsOrders.46a78b96.js";import"./VAutocomplete.7737ec6c.js";import"./VSelect.d3481141.js";import"./VCheckboxBtn.b2e8ef07.js";const K={__name:"RoleCreate",setup(k){let a=w();const r=N({name:"",permissions:[]}),m=async()=>{try{const l=await A.post(F.roles,r);await a.getRoleList(),await a.getPermissionList(),a.createModalStatus=!1}catch(l){console.log(l)}};return(l,o)=>(s(),f(x,{justify:"center"},{default:t(()=>[e(c,{cols:"12",md:"10"},{default:t(()=>[e(T,{title:"Add Role"},{default:t(()=>[e(U,null,{default:t(()=>[e(P,{onSubmit:o[2]||(o[2]=M(()=>{},["prevent"]))},{default:t(()=>[e(x,{style:{"max-height":"600px","overflow-y":"scroll"}},{default:t(()=>[e(c,{cols:"12"},{default:t(()=>[e($,{modelValue:r.name,"onUpdate:modelValue":o[0]||(o[0]=d=>r.name=d),label:"Role Name",placeholder:"Role Name",variant:"underlined"},null,8,["modelValue"])]),_:1}),(s(!0),i(_,null,V(n(a).permissionTitle,d=>(s(),f(B,{key:d,title:d},{default:t(()=>[(s(!0),i(_,null,V(n(a).permissions.filter(u=>u.title==d),u=>(s(),f(c,{key:u.id,cols:"3",class:"mb-0 pb-0"},{default:t(()=>[e(j,{modelValue:r.permissions,"onUpdate:modelValue":o[1]||(o[1]=b=>r.permissions=b),label:u.name,value:u.id},null,8,["modelValue","label","value"])]),_:2},1024))),128))]),_:2},1032,["title"]))),128)),e(c,{cols:"12",class:"d-flex gap-4"},{default:t(()=>[e(L,{type:"submit",onClick:m},{default:t(()=>[v(" Create ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},ee={__name:"RoleEdit",props:["roleid"],setup(k){const a=k;let r=w(),m=r.getSelectedRole(a.roleid);const l=N({name:m.name,permissions:m.permissions.map(d=>d.id)}),o=async()=>{try{let d=F.roles+"/"+a.roleid;const u=await A.put(d,l);await r.getRoleList(),await r.getPermissionList(),r.editModalStatus=!1}catch(d){console.log(d)}};return(d,u)=>(s(),f(x,{justify:"center"},{default:t(()=>[e(c,{cols:"12",md:"10"},{default:t(()=>[e(T,{title:"Edit Role"},{default:t(()=>[e(U,null,{default:t(()=>[e(P,{onSubmit:u[2]||(u[2]=M(()=>{},["prevent"]))},{default:t(()=>[e(x,{style:{"max-height":"600px","overflow-y":"scroll"}},{default:t(()=>[e(c,{cols:"12"},{default:t(()=>[e($,{modelValue:l.name,"onUpdate:modelValue":u[0]||(u[0]=b=>l.name=b),label:"Role Name",placeholder:"Role Name",variant:"underlined"},null,8,["modelValue"])]),_:1}),(s(!0),i(_,null,V(n(r).permissionTitle,b=>(s(),f(B,{key:b,title:b},{default:t(()=>[(s(!0),i(_,null,V(n(r).permissions.filter(y=>y.title==b),y=>(s(),f(c,{key:y.id,cols:"3",class:"mb-0 pb-0"},{default:t(()=>[e(j,{modelValue:l.permissions,"onUpdate:modelValue":u[1]||(u[1]=z=>l.permissions=z),label:y.name,value:y.id},null,8,["modelValue","label","value"])]),_:2},1024))),128))]),_:2},1032,["title"]))),128)),e(c,{cols:"12",class:"d-flex gap-4"},{default:t(()=>[e(L,{type:"submit",onClick:o},{default:t(()=>[v(" Update ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},te=p("thead",null,[p("tr",null,[p("th",{class:"text-uppercase"}," Name "),p("th",{class:"text-center text-uppercase"}," Permissions "),p("th",{class:"text-center text-uppercase"}," Action ")])],-1),le={class:"text-center"},ae={key:0},se={class:"text-center"},oe={__name:"RoleList",setup(k){let a=w(),r=g();return I(()=>{a.getRoleList(),a.getPermissionList()}),g(null),(m,l)=>(s(),f(x,{justify:"center"},{default:t(()=>[e(c,{cols:"12"},{default:t(()=>[e(T,null,{default:t(()=>[e(Y,null,{default:t(()=>[v(" Roles "),e(R,{size:"1.5rem",icon:"material-symbols:add-circle-outline-rounded",onClick:l[0]||(l[0]=o=>n(a).createModalStatus=!0)})]),_:1}),e(Z,null,{default:t(()=>[te,p("tbody",null,[(s(!0),i(_,null,V(n(a).roles,o=>(s(),i("tr",{key:o.id},[p("td",null,S(o.name),1),p("td",le,[(s(!0),i(_,null,V(o.permissions,(d,u)=>(s(),i("span",{key:d.id},[u!==0?(s(),i("span",ae,",")):O("",!0),v(" "+S(d.name),1)]))),128))]),p("td",se,[e(R,{size:"20",start:"",icon:"tabler:edit",onClick:d=>{Q(r)?r.value=o.id:r=o.id,n(a).editModalStatus=!0}},null,8,["onClick"])])]))),128))])]),_:1}),e(h,{modelValue:n(a).createModalStatus,"onUpdate:modelValue":l[1]||(l[1]=o=>n(a).createModalStatus=o),"max-width":"1200"},{default:t(()=>[e(K)]),_:1},8,["modelValue"]),e(h,{modelValue:n(a).editModalStatus,"onUpdate:modelValue":l[2]||(l[2]=o=>n(a).editModalStatus=o),"max-width":"1200"},{default:t(()=>[e(ee,{roleid:n(r)},null,8,["roleid"])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}))}},re={key:0},ne={key:1},de={__name:"role-permission",setup(k){const a=D();return a.tabs=[],a.addTab({id:E.randomNumber(),name:"Role",componentType:"main"}),(r,m)=>(s(),i("div",null,[e(G,{modelValue:n(a).selectedTab,"onUpdate:modelValue":m[0]||(m[0]=l=>n(a).selectedTab=l),"show-arrows":""},{default:t(()=>[(s(!0),i(_,null,V(n(a).tabs,l=>(s(),f(q,{key:l.id,value:l.id},{default:t(()=>[e(R,{size:"20",start:"",icon:"mdi-bell-outline"}),v(" "+S(l.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),e(X),e(J,{modelValue:n(a).selectedTab,"onUpdate:modelValue":m[1]||(m[1]=l=>n(a).selectedTab=l),class:"mt-5 disable-tab-transition",touch:!1},{default:t(()=>[(s(!0),i(_,null,V(n(a).tabs,l=>(s(),f(H,{key:l.id,value:l.id},{default:t(()=>[l.componentType=="main"?(s(),i("div",re,[e(oe)])):(s(),i("div",ne,[e(W,{ordercode:l.id},null,8,["ordercode"])]))]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]))}};typeof C=="function"&&C(de);export{de as default};
