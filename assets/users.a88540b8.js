import{u as j,h as z,_ as I}from"./UpdateOrder.fdfddc0b.js";import{aV as k,bx as $,aY as g,o as n,Q as b,w as l,a as e,e as u,R as T,S as P,Z as E,W as V,X as _,aZ as a,c as f,F as w,a0 as v,O as S,Y as U,b3 as L,b2 as A,P as N,bf as Y,ap as Z,N as C,aw as O,$ as Q,b as p,t as x,bt as X,bu as q,U as G,a3 as M}from"./index.f5f13f42.js";import"./moment.9709ab41.js";import{u as h}from"./users.20791e95.js";import B from"./PermissionGroup.12b6babc.js";import{V as D}from"./VForm.0cbde5a4.js";import{V as F}from"./VCheckbox.4e5e325c.js";import{V as R}from"./VDialog.a556b5e6.js";import{V as H,a as J,b as K,c as ee}from"./VWindowItem.2fd43b40.js";import"./report.23932c0f.js";import"./sellsOrders.6d3c027e.js";import"./VAutocomplete.5d78c808.js";import"./VSelect.75276038.js";import"./VCheckboxBtn.01643a35.js";const le={__name:"UserEdit",props:["user"],setup(y){const d=y;let c=h(),r=k(),o=$({name:d.user.name,email:d.user.email,roles:d.user.roles.map(t=>t.id),password:null,password_confirmation:null});g(()=>{r.roles.length||r.getRoleList()});const m=async()=>{try{let t=L.users+"/"+d.user.user_id;const s=await A.put(t,o);c.getUserList(),c.editModalStatus=!1}catch(t){console.log(t)}};return(t,s)=>(n(),b(V,{justify:"center"},{default:l(()=>[e(u,{cols:"12",md:"10"},{default:l(()=>[e(T,{title:"Edit User"},{default:l(()=>[e(P,null,{default:l(()=>[e(D,{onSubmit:s[5]||(s[5]=E(()=>{},["prevent"]))},{default:l(()=>[e(V,null,{default:l(()=>[e(u,{cols:"12"},{default:l(()=>[e(u,{cols:"12"},{default:l(()=>[e(_,{modelValue:a(o).name,"onUpdate:modelValue":s[0]||(s[0]=i=>a(o).name=i),label:"User Name",placeholder:"User Name",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12"},{default:l(()=>[e(_,{modelValue:a(o).email,"onUpdate:modelValue":s[1]||(s[1]=i=>a(o).email=i),label:"User Email",placeholder:"User Email",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",style:{padding:"0"}},{default:l(()=>[e(B,{title:"Role"},{default:l(()=>[(n(!0),f(w,null,v(a(r).roles,i=>(n(),b(u,{key:i.id,cols:"3",class:"m-0 p-0"},{default:l(()=>[e(F,{modelValue:a(o).roles,"onUpdate:modelValue":s[2]||(s[2]=W=>a(o).roles=W),label:i.name,value:i.id},null,8,["modelValue","label","value"])]),_:2},1024))),128))]),_:1})]),_:1}),e(u,{cols:"12"},{default:l(()=>[e(V,null,{default:l(()=>[e(u,{cols:"6"},{default:l(()=>[e(_,{modelValue:a(o).password,"onUpdate:modelValue":s[3]||(s[3]=i=>a(o).password=i),label:"Password",placeholder:"Password",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(u,{cols:"6"},{default:l(()=>[e(_,{modelValue:a(o).password_confirmation,"onUpdate:modelValue":s[4]||(s[4]=i=>a(o).password_confirmation=i),label:"Confirm Password",placeholder:"Confirm Password",variant:"underlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(u,{cols:"12",class:"d-flex gap-4"},{default:l(()=>[e(S,{onClick:m},{default:l(()=>[U(" Submit ")]),_:1}),e(S,{type:"reset",color:"secondary",variant:"tonal"},{default:l(()=>[U(" Reset ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},ae={__name:"UserCreate",setup(y){let d=h(),c=k(),r=$({name:"",email:"",roles:[],password:null,password_confirmation:null});g(()=>{c.roles.length||c.getRoleList()});const o=async()=>{try{let m=L.users;const t=await A.post(m,r);d.getUserList(),d.userCreateModalStatus=!1}catch(m){console.log(m)}};return(m,t)=>(n(),b(V,{justify:"center"},{default:l(()=>[e(u,{cols:"12",md:"10"},{default:l(()=>[e(T,{title:"Add User"},{default:l(()=>[e(P,null,{default:l(()=>[e(D,{onSubmit:t[5]||(t[5]=E(()=>{},["prevent"]))},{default:l(()=>[e(V,null,{default:l(()=>[e(u,{cols:"12"},{default:l(()=>[e(u,{cols:"12"},{default:l(()=>[e(_,{modelValue:a(r).name,"onUpdate:modelValue":t[0]||(t[0]=s=>a(r).name=s),label:"User Name",placeholder:"User Name",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12"},{default:l(()=>[e(_,{modelValue:a(r).email,"onUpdate:modelValue":t[1]||(t[1]=s=>a(r).email=s),label:"User Email",placeholder:"User Email",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",style:{padding:"0"}},{default:l(()=>[e(B,{title:"Role"},{default:l(()=>[(n(!0),f(w,null,v(a(c).roles,s=>(n(),b(u,{key:s.id,cols:"3",class:"m-0 p-0"},{default:l(()=>[e(F,{modelValue:a(r).roles,"onUpdate:modelValue":t[2]||(t[2]=i=>a(r).roles=i),label:s.name,value:s.id},null,8,["modelValue","label","value"])]),_:2},1024))),128))]),_:1})]),_:1}),e(u,{cols:"12"},{default:l(()=>[e(V,null,{default:l(()=>[e(u,{cols:"6"},{default:l(()=>[e(_,{modelValue:a(r).password,"onUpdate:modelValue":t[3]||(t[3]=s=>a(r).password=s),label:"Password",placeholder:"Password",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(u,{cols:"6"},{default:l(()=>[e(_,{modelValue:a(r).password_confirmation,"onUpdate:modelValue":t[4]||(t[4]=s=>a(r).password_confirmation=s),label:"Confirm Password",placeholder:"Confirm Password",variant:"underlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(u,{cols:"12",class:"d-flex gap-4"},{default:l(()=>[e(S,{onClick:o},{default:l(()=>[U(" Submit ")]),_:1}),e(S,{type:"reset",color:"secondary",variant:"tonal"},{default:l(()=>[U(" Reset ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},te=p("thead",null,[p("tr",null,[p("th",{class:"text-uppercase"}," Name "),p("th",{class:"text-center text-uppercase"}," Email "),p("th",{class:"text-center text-uppercase"}," Warehouse "),p("th",{class:"text-center text-uppercase"}," Role "),p("th",{class:"text-center text-uppercase"}," Action ")])],-1),se={class:"text-center"},oe={class:"text-center"},re={class:"text-center"},de={key:0},ue={class:"text-center"},ne={__name:"UserList",setup(y){let d=h(),c=k();g(()=>{d.getUserList()});let r=null;return N(!1),N(null),(o,m)=>(n(),b(V,{justify:"center"},{default:l(()=>[e(u,{cols:"12"},{default:l(()=>[e(T,null,{default:l(()=>[e(Y,null,{default:l(()=>[U(" Users "),Z(e(C,{size:"1.5rem",icon:"material-symbols:add-circle-outline-rounded",onClick:m[0]||(m[0]=t=>a(d).userCreateModalStatus=!0)},null,512),[[O,a(c).can("user-create")]])]),_:1}),e(Q,null,{default:l(()=>[te,p("tbody",null,[(n(!0),f(w,null,v(a(d).users,t=>(n(),f("tr",{key:t.user_id},[p("td",null,x(t.name),1),p("td",se,x(t.email),1),p("td",oe,x(t.warehouse_name),1),p("td",re,[(n(!0),f(w,null,v(t.roles,(s,i)=>(n(),f("span",{key:s.id},[i!==0?(n(),f("span",de,",")):X("",!0),U(" "+x(s.name),1)]))),128))]),p("td",ue,[e(C,{size:"20",start:"",icon:"tabler:edit",onClick:s=>{q(r)?r.value=t:r=t,a(d).editModalStatus=!0}},null,8,["onClick"])])]))),128))])]),_:1}),e(R,{modelValue:a(d).editModalStatus,"onUpdate:modelValue":m[1]||(m[1]=t=>a(d).editModalStatus=t),"max-width":"600"},{default:l(()=>[e(le,{user:a(r)},null,8,["user"])]),_:1},8,["modelValue"]),e(R,{modelValue:a(d).userCreateModalStatus,"onUpdate:modelValue":m[2]||(m[2]=t=>a(d).userCreateModalStatus=t),"max-width":"600"},{default:l(()=>[e(ae,{user:a(r)},null,8,["user"])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}))}},ie={key:0},me={key:1},pe={__name:"users",setup(y){const d=j();return d.tabs=[],d.addTab({id:z.randomNumber(),name:"Users",componentType:"main"}),(c,r)=>(n(),f("div",null,[e(J,{modelValue:a(d).selectedTab,"onUpdate:modelValue":r[0]||(r[0]=o=>a(d).selectedTab=o),"show-arrows":""},{default:l(()=>[(n(!0),f(w,null,v(a(d).tabs,o=>(n(),b(H,{key:o.id,value:o.id},{default:l(()=>[e(C,{size:"20",start:"",icon:"lucide:user-round"}),U(" "+x(o.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),e(G),e(ee,{modelValue:a(d).selectedTab,"onUpdate:modelValue":r[1]||(r[1]=o=>a(d).selectedTab=o),class:"mt-5 disable-tab-transition",touch:!1},{default:l(()=>[(n(!0),f(w,null,v(a(d).tabs,o=>(n(),b(K,{key:o.id,value:o.id},{default:l(()=>[o.componentType=="main"?(n(),f("div",ie,[e(ne)])):(n(),f("div",me,[e(I,{ordercode:o.id},null,8,["ordercode"])]))]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]))}};typeof M=="function"&&M(pe);export{pe as default};
