import{U as y,o as C,W as P,w as t,a as e,e as o,X as N,Y as $,a1 as j,$ as b,j as G,a0 as V,l as k,k as T,b3 as A,b4 as M,bl as O,t as f,i as _,a$ as F,b as s,a3 as H,c as w,F as X,a4 as Z,aY as I,as as x,az as g,T as D,bC as S,aZ as J,a_ as W,_ as K,m as R}from"./index.49b3a9ac.js";import{V as z}from"./VForm.e930f1b1.js";import{V as B}from"./VAutocomplete.9ed7f107.js";import"./moment.9709ab41.js";import{V as Q}from"./VTextarea.d166cea4.js";import{V as E}from"./VDialog.f5a223aa.js";import{V as q,a as ee,b as L,c as te}from"./VWindowItem.50b03732.js";import"./VSelect.17fce6d0.js";import"./VCheckboxBtn.cea21357.js";const le={__name:"AddCustomer",setup(U){const r={name:null,contact_no:null,village:null,city:null,email:null,total_spend:null,total_due:null},n=y(structuredClone(r)),m=async()=>{try{(await A.post(M.createCustomer,n.value)).data.status&&(n.value=y(structuredClone(r)))}catch(u){console.log(u)}};return(u,l)=>(C(),P(b,{justify:"center"},{default:t(()=>[e(o,{cols:"12",md:"10"},{default:t(()=>[e(N,{title:"Add Customer"},{default:t(()=>[e($,null,{default:t(()=>[e(z,{onSubmit:l[7]||(l[7]=j(()=>{},["prevent"]))},{default:t(()=>[e(b,null,{default:t(()=>[e(o,{cols:"12",md:"3"},{default:t(()=>[e(G,{width:"100%",src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR4rg2uXCXcgz5EOZDYdyOiJl_BkMOjgqppYsJ5nPTp5Zwu_0sGhxLFf7F3Yh8wy3tT5dE&usqp=CAU"})]),_:1}),e(o,{cols:"12",md:"9"},{default:t(()=>[e(o,{cols:"12"},{default:t(()=>[e(V,{modelValue:n.value.name,"onUpdate:modelValue":l[0]||(l[0]=a=>n.value.name=a),label:"Customer Name",placeholder:"Customer Name",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(o,{cols:"12"},{default:t(()=>[e(V,{modelValue:n.value.contact_no,"onUpdate:modelValue":l[1]||(l[1]=a=>n.value.contact_no=a),label:"Contact Number",placeholder:"Contact Number",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(o,{cols:"12"},{default:t(()=>[e(b,null,{default:t(()=>[e(o,{cols:"6"},{default:t(()=>[e(V,{modelValue:n.value.village,"onUpdate:modelValue":l[2]||(l[2]=a=>n.value.village=a),label:"Village",placeholder:"Village",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(o,{cols:"6"},{default:t(()=>[e(B,{modelValue:n.value.city,"onUpdate:modelValue":l[3]||(l[3]=a=>n.value.city=a),items:{},label:"City",placeholder:"City",variant:"underlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(o,{cols:"12"},{default:t(()=>[e(V,{modelValue:n.value.email,"onUpdate:modelValue":l[4]||(l[4]=a=>n.value.email=a),label:"Email",placeholder:"Email",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(o,{cols:"12"},{default:t(()=>[e(b,null,{default:t(()=>[e(o,{cols:"6"},{default:t(()=>[e(V,{modelValue:n.value.total_spend,"onUpdate:modelValue":l[5]||(l[5]=a=>n.value.total_spend=a),label:"Total Spend",placeholder:"Total Spend",variant:"underlined",type:"number"},null,8,["modelValue"])]),_:1}),e(o,{cols:"6"},{default:t(()=>[e(V,{modelValue:n.value.total_due,"onUpdate:modelValue":l[6]||(l[6]=a=>n.value.total_due=a),label:"Total Due",placeholder:"Total Due",variant:"underlined",type:"number"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(o,{cols:"12",class:"d-flex gap-4"},{default:t(()=>[e(k,{type:"submit",onClick:m},{default:t(()=>[T(" Submit ")]),_:1}),e(k,{type:"reset",color:"secondary",variant:"tonal"},{default:t(()=>[T(" Reset ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},ae={__name:"CustomerEdit",props:["customer"],emits:["edit-modal-status"],setup(U,{emit:r}){const n=U,m=n.customer,u=y(m),l=async()=>{try{const a=M.editCustomer+"/"+n.customer.customer_id;(await A.put(a,u.value)).data.status&&r("edit-modal-status",!1)}catch(a){console.log(a)}};return(a,d)=>(C(),P(b,{justify:"center"},{default:t(()=>[e(o,{cols:"12",md:"10"},{default:t(()=>[e(N,{title:"Add Customer"},{default:t(()=>[e($,null,{default:t(()=>[e(z,{onSubmit:d[7]||(d[7]=j(()=>{},["prevent"]))},{default:t(()=>[e(b,null,{default:t(()=>[e(o,{cols:"12",md:"3"},{default:t(()=>[e(G,{width:"100%",src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR4rg2uXCXcgz5EOZDYdyOiJl_BkMOjgqppYsJ5nPTp5Zwu_0sGhxLFf7F3Yh8wy3tT5dE&usqp=CAU"})]),_:1}),e(o,{cols:"12",md:"9"},{default:t(()=>[e(o,{cols:"12"},{default:t(()=>[e(V,{modelValue:u.value.name,"onUpdate:modelValue":d[0]||(d[0]=i=>u.value.name=i),label:"Customer Name",placeholder:"Customer Name",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(o,{cols:"12"},{default:t(()=>[e(V,{modelValue:u.value.contact_no,"onUpdate:modelValue":d[1]||(d[1]=i=>u.value.contact_no=i),label:"Contact Number",placeholder:"Contact Number",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(o,{cols:"12"},{default:t(()=>[e(b,null,{default:t(()=>[e(o,{cols:"6"},{default:t(()=>[e(V,{modelValue:u.value.village,"onUpdate:modelValue":d[2]||(d[2]=i=>u.value.village=i),label:"Village",placeholder:"Village",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(o,{cols:"6"},{default:t(()=>[e(B,{modelValue:u.value.city,"onUpdate:modelValue":d[3]||(d[3]=i=>u.value.city=i),items:{},label:"City",placeholder:"City",variant:"underlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(o,{cols:"12"},{default:t(()=>[e(V,{modelValue:u.value.email,"onUpdate:modelValue":d[4]||(d[4]=i=>u.value.email=i),label:"Email",placeholder:"Email",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(o,{cols:"12"},{default:t(()=>[e(b,null,{default:t(()=>[e(o,{cols:"6"},{default:t(()=>[e(V,{modelValue:u.value.total_spend,"onUpdate:modelValue":d[5]||(d[5]=i=>u.value.total_spend=i),label:"Total Spend",placeholder:"Total Spend",variant:"underlined",type:"number"},null,8,["modelValue"])]),_:1}),e(o,{cols:"6"},{default:t(()=>[e(V,{modelValue:u.value.total_due,"onUpdate:modelValue":d[6]||(d[6]=i=>u.value.total_due=i),label:"Total Due",placeholder:"Total Due",variant:"underlined",type:"number"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(o,{cols:"12",class:"d-flex gap-4"},{default:t(()=>[e(k,{type:"submit",onClick:l},{default:t(()=>[T(" Submit ")]),_:1}),e(k,{type:"reset",color:"secondary",variant:"tonal"},{default:t(()=>[T(" Reset ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},ue={__name:"CustomerPayment",props:["customer"],emits:["payment-modal-status"],setup(U,{emit:r}){const n=U;let m=[{title:"Deposit",value:1},{title:"Due",value:0}],u={amount:null,payment_type:1,message:null};const l=y(structuredClone(u)),a=n.customer,d=y(a),i=async()=>{try{const h=M.editCustomer+"/"+n.customer.customer_id+"/payment";(await A.post(h,l.value)).data.status&&(l.value=y(a),r("payment-modal-status",!1))}catch(h){console.log(h)}};return(h,c)=>(C(),P(b,{justify:"center"},{default:t(()=>[e(o,{cols:"12",md:"10"},{default:t(()=>[e(N,null,{default:t(()=>[e(O,null,{default:t(()=>[T(f(d.value.name)+" Payment ",1)]),_:1}),e($,null,{default:t(()=>[e(z,{onSubmit:c[4]||(c[4]=j(()=>{},["prevent"]))},{default:t(()=>[e(b,null,{default:t(()=>[e(o,{cols:"12"},{default:t(()=>[e(B,{modelValue:l.value.payment_type,"onUpdate:modelValue":c[0]||(c[0]=v=>l.value.payment_type=v),items:_(m),label:"Product Type",placeholder:"Product Type",variant:"underlined"},null,8,["modelValue","items"])]),_:1}),e(o,{cols:"12"},{default:t(()=>[e(V,{modelValue:l.value.amount,"onUpdate:modelValue":c[1]||(c[1]=v=>l.value.amount=v),label:"Amount",placeholder:"Amount",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(o,{cols:"12"},{default:t(()=>[e(Q,{modelValue:l.value.message,"onUpdate:modelValue":c[2]||(c[2]=v=>l.value.message=v),label:"Message",placeholder:"Message",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(o,{cols:"12",class:"d-flex gap-4"},{default:t(()=>[e(k,{type:"submit",onClick:i},{default:t(()=>[T(" Submit ")]),_:1}),e(k,{type:"reset",color:"secondary",variant:"tonal",onClick:c[3]||(c[3]=v=>r("payment-modal-status",!1))},{default:t(()=>[T(" Close ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},oe=s("thead",null,[s("tr",null,[s("th",{class:"text-uppercase"}," Transaction ID "),s("th",{class:"text-uppercase"}," Name "),s("th",{class:"text-uppercase"}," Ref "),s("th",{class:"text-center text-uppercase"}," Time "),s("th",{class:"text-center text-uppercase"}," Pre Amount "),s("th",{class:"text-center text-uppercase"}," Amount "),s("th",{class:"text-center text-uppercase"}," Final ")])],-1),se={class:"text-center"},ne={class:"text-center"},de={class:"text-center"},re={key:0},ie={key:1},me={class:"text-center"},ce={__name:"CustomerPaymentHistory",props:["customer"],setup(U){const n=U.customer,m=y([]);return F(async()=>{let u=await A.get(M.getCustomer+"/"+n.customer_id+"/payment");m.value=u.data.data}),(u,l)=>(C(),P(b,{justify:"center"},{default:t(()=>[e(o,{cols:"12"},{default:t(()=>[e(N,null,{default:t(()=>[e(O,null,{default:t(()=>[T(f(_(n).name)+" ",1),s("span",null,f(m.value.current),1)]),_:1}),e($,null,{default:t(()=>[e(b,{style:{"max-height":"600px","overflow-y":"scroll"}},{default:t(()=>[e(H,null,{default:t(()=>[oe,s("tbody",null,[(C(!0),w(X,null,Z(m.value.transaction,a=>(C(),w("tr",{key:a.transaction_id},[s("td",null,f(a.transaction_id),1),s("td",null,f(a.customer_name),1),s("td",null,f(a.ref),1),s("td",se,f(a.created_at),1),s("td",ne,f(a.pre_amount),1),s("td",de,[a.type?(C(),w("span",re," - ")):(C(),w("span",ie," + ")),T(" "+f(a.amount),1)]),s("td",me,f(a.post_amount),1)]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},pe=s("thead",null,[s("tr",null,[s("th",{class:"text-uppercase"}," Name "),s("th",{class:"text-center text-uppercase"}," Village "),s("th",{class:"text-center text-uppercase"}," Contact No "),s("th",{class:"text-center text-uppercase"}," Total Due "),s("th",{class:"text-center text-uppercase"}," Action ")])],-1),_e={class:"text-center"},fe={class:"text-center"},ve={class:"text-center"},Ve={class:"text-center"},ye={__name:"CustomerList",setup(U){let r=I();const n=y([]),m=y("");let u=y(!1),l=y(!1),a=y(!1);function d(c){u.value=c}function i(c){l.value=c}function h(c){a.value=c}return F(async()=>{let c=await A.get(M.getCustomer);n.value=c.data.data}),(c,v)=>(C(),P(b,{justify:"center"},{default:t(()=>[e(o,{cols:"12"},{default:t(()=>[e(N,{title:"Basic"},{default:t(()=>[e(H,null,{default:t(()=>[pe,s("tbody",null,[(C(!0),w(X,null,Z(n.value,p=>(C(),w("tr",{key:p.customer_id},[s("td",null,f(p.name)+" - "+f(p.village),1),s("td",_e,f(p.village),1),s("td",fe,f(p.contact_no),1),s("td",ve,[x(s("span",null,f(p.total_due),513),[[g,_(r).can("customer-due-view")]])]),s("td",Ve,[x(e(D,{size:"20",start:"",icon:"tabler:edit",onClick:Y=>{m.value=p,S(u)?u.value=!0:u=!0}},null,8,["onClick"]),[[g,_(r).can("customer-edit")]]),x(e(D,{size:"20",start:"",icon:"majesticons:money-line",onClick:Y=>{m.value=p,S(l)?l.value=!0:l=!0}},null,8,["onClick"]),[[g,_(r).can("customer-payment")]]),x(e(D,{size:"20",start:"",icon:"mdi-clipboard-text-history-outline",onClick:Y=>{m.value=p,S(a)?a.value=!0:a=!0}},null,8,["onClick"]),[[g,_(r).can("customer-history")]])])]))),128))])]),_:1}),x(e(E,{modelValue:_(u),"onUpdate:modelValue":v[0]||(v[0]=p=>S(u)?u.value=p:u=p),width:"auto"},{default:t(()=>[e(ae,{customer:m.value,onEditModalStatus:d},null,8,["customer"])]),_:1},8,["modelValue"]),[[g,_(r).can("customer-edit")]]),x(e(E,{modelValue:_(l),"onUpdate:modelValue":v[1]||(v[1]=p=>S(l)?l.value=p:l=p),width:"auto"},{default:t(()=>[e(ue,{customer:m.value,onPaymentModalStatus:i},null,8,["customer"])]),_:1},8,["modelValue"]),[[g,_(r).can("customer-payment")]]),x(e(E,{modelValue:_(a),"onUpdate:modelValue":v[2]||(v[2]=p=>S(a)?a.value=p:a=p),width:"auto"},{default:t(()=>[e(ce,{customer:m.value,onPaymentHistoryModalStatus:h},null,8,["customer"])]),_:1},8,["modelValue"]),[[g,_(r).can("customer-history")]])]),_:1})]),_:1})]),_:1}))}},be=s("h1",null,"Hello",-1),Ce={__name:"customer",setup(U){let r=I();const n=J(),m=W();F(async()=>{await n.updateProductList()});function u(){m.updateCategoryList(),m.updateProductTypeList(),m.updateUnitTypeList()}const l=y("list");return(a,d)=>(C(),w("div",null,[e(ee,{modelValue:l.value,"onUpdate:modelValue":d[0]||(d[0]=i=>l.value=i),"show-arrows":""},{default:t(()=>[x(e(q,{value:"list"},{default:t(()=>[e(D,{size:"20",start:"",icon:"la:list-alt"}),T(" List ")]),_:1},512),[[g,_(r).can("customer-list-view")]]),x(e(q,{value:"create",onClick:u},{default:t(()=>[e(D,{size:"20",start:"",icon:"uit:create-dashboard"}),T(" Create ")]),_:1},512),[[g,_(r).can("customer-create")]])]),_:1},8,["modelValue"]),e(K),e(te,{modelValue:l.value,"onUpdate:modelValue":d[1]||(d[1]=i=>l.value=i),class:"mt-5 disable-tab-transition",touch:!1},{default:t(()=>[x(e(L,{value:"create"},{default:t(()=>[e(le)]),_:1},512),[[g,_(r).can("customer-list-view")]]),x(e(L,{value:"list"},{default:t(()=>[e(ye)]),_:1},512),[[g,_(r).can("customer-create")]]),e(L,{value:"test","onGroup:selected":_(n).updateProductList},{default:t(()=>[be]),_:1},8,["onGroup:selected"])]),_:1},8,["modelValue"])]))}};typeof R=="function"&&R(Ce);export{Ce as default};
