import{P as V,o as y,Q as P,w as t,a as e,e as s,R as D,S as L,Z as F,W as b,b1 as O,X as v,O as k,Y as w,b2 as A,b3 as M,bf as q,t as _,aY as j,aZ as p,b as o,$ as G,c as h,F as X,a0 as Z,aV as H,ap as x,aw as g,N,bu as S,aW as J,aX as W,U as Q,a3 as Y}from"./index.f5f13f42.js";import{V as B}from"./VForm.0cbde5a4.js";import{V as I}from"./VAutocomplete.5d78c808.js";import"./moment.9709ab41.js";import{V as K}from"./VTextarea.9711ff7d.js";import{V as $}from"./VDialog.a556b5e6.js";import{V as z,a as ee,b as E,c as te}from"./VWindowItem.2fd43b40.js";import"./VSelect.75276038.js";import"./VCheckboxBtn.01643a35.js";const le={__name:"AddCustomer",setup(U){const i={name:null,contact_no:null,village:null,city:null,email:null,total_spend:null,total_due:null},n=V(structuredClone(i)),c=async()=>{try{const l=await A.post(M.createCustomer,n.value);console.log(l.data),l.data.status&&(n.value=V(structuredClone(i)))}catch(l){console.log(l)}};return(l,u)=>(y(),P(b,{justify:"center"},{default:t(()=>[e(s,{cols:"12",md:"10"},{default:t(()=>[e(D,{title:"Add Customer"},{default:t(()=>[e(L,null,{default:t(()=>[e(B,{onSubmit:u[7]||(u[7]=F(()=>{},["prevent"]))},{default:t(()=>[e(b,null,{default:t(()=>[e(s,{cols:"12",md:"3"},{default:t(()=>[e(O,{width:"100%",src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR4rg2uXCXcgz5EOZDYdyOiJl_BkMOjgqppYsJ5nPTp5Zwu_0sGhxLFf7F3Yh8wy3tT5dE&usqp=CAU"})]),_:1}),e(s,{cols:"12",md:"9"},{default:t(()=>[e(s,{cols:"12"},{default:t(()=>[e(v,{modelValue:n.value.name,"onUpdate:modelValue":u[0]||(u[0]=a=>n.value.name=a),label:"Customer Name",placeholder:"Customer Name",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(s,{cols:"12"},{default:t(()=>[e(v,{modelValue:n.value.contact_no,"onUpdate:modelValue":u[1]||(u[1]=a=>n.value.contact_no=a),label:"Contact Number",placeholder:"Contact Number",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(s,{cols:"12"},{default:t(()=>[e(b,null,{default:t(()=>[e(s,{cols:"6"},{default:t(()=>[e(v,{modelValue:n.value.village,"onUpdate:modelValue":u[2]||(u[2]=a=>n.value.village=a),label:"Village",placeholder:"Village",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(s,{cols:"6"},{default:t(()=>[e(I,{modelValue:n.value.city,"onUpdate:modelValue":u[3]||(u[3]=a=>n.value.city=a),items:{},label:"City",placeholder:"City",variant:"underlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,{cols:"12"},{default:t(()=>[e(v,{modelValue:n.value.email,"onUpdate:modelValue":u[4]||(u[4]=a=>n.value.email=a),label:"Email",placeholder:"Email",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(s,{cols:"12"},{default:t(()=>[e(b,null,{default:t(()=>[e(s,{cols:"6"},{default:t(()=>[e(v,{modelValue:n.value.total_spend,"onUpdate:modelValue":u[5]||(u[5]=a=>n.value.total_spend=a),label:"Total Spend",placeholder:"Total Spend",variant:"underlined",type:"number"},null,8,["modelValue"])]),_:1}),e(s,{cols:"6"},{default:t(()=>[e(v,{modelValue:n.value.total_due,"onUpdate:modelValue":u[6]||(u[6]=a=>n.value.total_due=a),label:"Total Due",placeholder:"Total Due",variant:"underlined",type:"number"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(s,{cols:"12",class:"d-flex gap-4"},{default:t(()=>[e(k,{type:"submit",onClick:c},{default:t(()=>[w(" Submit ")]),_:1}),e(k,{type:"reset",color:"secondary",variant:"tonal"},{default:t(()=>[w(" Reset ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},ae={__name:"CustomerEdit",props:["customer"],emits:["edit-modal-status"],setup(U,{emit:i}){const n=U,c=n.customer,l=V(c),u=async()=>{try{const a=M.editCustomer+"/"+n.customer.customer_id;(await A.put(a,l.value)).data.status&&i("edit-modal-status",!1)}catch(a){console.log(a)}};return(a,d)=>(y(),P(b,{justify:"center"},{default:t(()=>[e(s,{cols:"12",md:"10"},{default:t(()=>[e(D,{title:"Add Customer"},{default:t(()=>[e(L,null,{default:t(()=>[e(B,{onSubmit:d[7]||(d[7]=F(()=>{},["prevent"]))},{default:t(()=>[e(b,null,{default:t(()=>[e(s,{cols:"12",md:"3"},{default:t(()=>[e(O,{width:"100%",src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR4rg2uXCXcgz5EOZDYdyOiJl_BkMOjgqppYsJ5nPTp5Zwu_0sGhxLFf7F3Yh8wy3tT5dE&usqp=CAU"})]),_:1}),e(s,{cols:"12",md:"9"},{default:t(()=>[e(s,{cols:"12"},{default:t(()=>[e(v,{modelValue:l.value.name,"onUpdate:modelValue":d[0]||(d[0]=r=>l.value.name=r),label:"Customer Name",placeholder:"Customer Name",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(s,{cols:"12"},{default:t(()=>[e(v,{modelValue:l.value.contact_no,"onUpdate:modelValue":d[1]||(d[1]=r=>l.value.contact_no=r),label:"Contact Number",placeholder:"Contact Number",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(s,{cols:"12"},{default:t(()=>[e(b,null,{default:t(()=>[e(s,{cols:"6"},{default:t(()=>[e(v,{modelValue:l.value.village,"onUpdate:modelValue":d[2]||(d[2]=r=>l.value.village=r),label:"Village",placeholder:"Village",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(s,{cols:"6"},{default:t(()=>[e(I,{modelValue:l.value.city,"onUpdate:modelValue":d[3]||(d[3]=r=>l.value.city=r),items:{},label:"City",placeholder:"City",variant:"underlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,{cols:"12"},{default:t(()=>[e(v,{modelValue:l.value.email,"onUpdate:modelValue":d[4]||(d[4]=r=>l.value.email=r),label:"Email",placeholder:"Email",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(s,{cols:"12"},{default:t(()=>[e(b,null,{default:t(()=>[e(s,{cols:"6"},{default:t(()=>[e(v,{modelValue:l.value.total_spend,"onUpdate:modelValue":d[5]||(d[5]=r=>l.value.total_spend=r),label:"Total Spend",placeholder:"Total Spend",variant:"underlined",type:"number"},null,8,["modelValue"])]),_:1}),e(s,{cols:"6"},{default:t(()=>[e(v,{modelValue:l.value.total_due,"onUpdate:modelValue":d[6]||(d[6]=r=>l.value.total_due=r),label:"Total Due",placeholder:"Total Due",variant:"underlined",type:"number"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(s,{cols:"12",class:"d-flex gap-4"},{default:t(()=>[e(k,{type:"submit",onClick:u},{default:t(()=>[w(" Submit ")]),_:1}),e(k,{type:"reset",color:"secondary",variant:"tonal"},{default:t(()=>[w(" Reset ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},ue={__name:"CustomerPayment",props:["customer"],emits:["payment-modal-status"],setup(U,{emit:i}){const n=U;let c={amount:null,message:null};const l=V(structuredClone(c)),u=n.customer,a=V(u),d=async()=>{try{const r=M.editCustomer+"/"+n.customer.customer_id+"/payment";(await A.post(r,l.value)).data.status&&(l.value=V(u),i("payment-modal-status",!1))}catch(r){console.log(r)}};return(r,C)=>(y(),P(b,{justify:"center"},{default:t(()=>[e(s,{cols:"12",md:"10"},{default:t(()=>[e(D,null,{default:t(()=>[e(q,null,{default:t(()=>[w(_(a.value.name)+" Payment ",1)]),_:1}),e(L,null,{default:t(()=>[e(B,{onSubmit:C[3]||(C[3]=F(()=>{},["prevent"]))},{default:t(()=>[e(b,null,{default:t(()=>[e(s,{cols:"12"},{default:t(()=>[e(v,{modelValue:l.value.amount,"onUpdate:modelValue":C[0]||(C[0]=f=>l.value.amount=f),label:"Amount",placeholder:"Amount",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(s,{cols:"12"},{default:t(()=>[e(K,{modelValue:l.value.message,"onUpdate:modelValue":C[1]||(C[1]=f=>l.value.message=f),label:"Message",placeholder:"Message",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(s,{cols:"12",class:"d-flex gap-4"},{default:t(()=>[e(k,{type:"submit",onClick:d},{default:t(()=>[w(" Submit ")]),_:1}),e(k,{type:"reset",color:"secondary",variant:"tonal",onClick:C[2]||(C[2]=f=>i("payment-modal-status",!1))},{default:t(()=>[w(" Close ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},oe=o("thead",null,[o("tr",null,[o("th",{class:"text-uppercase"}," Transaction ID "),o("th",{class:"text-uppercase"}," Name "),o("th",{class:"text-uppercase"}," Ref "),o("th",{class:"text-center text-uppercase"}," Time "),o("th",{class:"text-center text-uppercase"}," Pre Amount "),o("th",{class:"text-center text-uppercase"}," Amount "),o("th",{class:"text-center text-uppercase"}," Final ")])],-1),se={class:"text-center"},ne={class:"text-center"},de={class:"text-center"},re={key:0},ie={key:1},ce={class:"text-center"},me={__name:"CustomerPaymentHistory",props:["customer"],setup(U){const n=U.customer,c=V([]);return j(async()=>{let l=await A.get(M.getCustomer+"/"+n.customer_id+"/payment");c.value=l.data.data}),(l,u)=>(y(),P(b,{justify:"center"},{default:t(()=>[e(s,{cols:"12"},{default:t(()=>[e(D,null,{default:t(()=>[e(q,null,{default:t(()=>[w(_(p(n).name)+" ",1),o("span",null,_(c.value.current),1)]),_:1}),e(G,null,{default:t(()=>[oe,o("tbody",null,[(y(!0),h(X,null,Z(c.value.transaction,a=>(y(),h("tr",{key:a.transaction_id},[o("td",null,_(a.transaction_id),1),o("td",null,_(a.customer_name),1),o("td",null,_(a.ref),1),o("td",se,_(a.created_at),1),o("td",ne,_(a.pre_amount),1),o("td",de,[a.type?(y(),h("span",re," - ")):(y(),h("span",ie," + ")),w(" "+_(a.amount),1)]),o("td",ce,_(a.post_amount),1)]))),128))])]),_:1})]),_:1})]),_:1})]),_:1}))}},pe=o("thead",null,[o("tr",null,[o("th",{class:"text-uppercase"}," Name "),o("th",{class:"text-center text-uppercase"}," Village "),o("th",{class:"text-center text-uppercase"}," Contact No "),o("th",{class:"text-center text-uppercase"}," Total Due "),o("th",{class:"text-center text-uppercase"}," Action ")])],-1),_e={class:"text-center"},fe={class:"text-center"},ve={class:"text-center"},Ve={class:"text-center"},ye={__name:"CustomerList",setup(U){let i=H();const n=V([]),c=V("");let l=V(!1),u=V(!1),a=V(!1);function d(f){l.value=f}function r(f){u.value=f}function C(f){a.value=f}return j(async()=>{let f=await A.get(M.getCustomer);n.value=f.data.data}),(f,T)=>(y(),P(b,{justify:"center"},{default:t(()=>[e(s,{cols:"12"},{default:t(()=>[e(D,{title:"Basic"},{default:t(()=>[e(G,null,{default:t(()=>[pe,o("tbody",null,[(y(!0),h(X,null,Z(n.value,m=>(y(),h("tr",{key:m.customer_id},[o("td",null,_(m.name)+" - "+_(m.village),1),o("td",_e,_(m.village),1),o("td",fe,_(m.contact_no),1),o("td",ve,[x(o("span",null,_(m.total_due),513),[[g,p(i).can("customer-due-view")]])]),o("td",Ve,[x(e(N,{size:"20",start:"",icon:"tabler:edit",onClick:R=>{c.value=m,S(l)?l.value=!0:l=!0}},null,8,["onClick"]),[[g,p(i).can("customer-edit")]]),x(e(N,{size:"20",start:"",icon:"majesticons:money-line",onClick:R=>{c.value=m,S(u)?u.value=!0:u=!0}},null,8,["onClick"]),[[g,p(i).can("customer-payment")]]),x(e(N,{size:"20",start:"",icon:"mdi-clipboard-text-history-outline",onClick:R=>{c.value=m,S(a)?a.value=!0:a=!0}},null,8,["onClick"]),[[g,p(i).can("customer-history")]])])]))),128))])]),_:1}),x(e($,{modelValue:p(l),"onUpdate:modelValue":T[0]||(T[0]=m=>S(l)?l.value=m:l=m),width:"auto"},{default:t(()=>[e(ae,{customer:c.value,onEditModalStatus:d},null,8,["customer"])]),_:1},8,["modelValue"]),[[g,p(i).can("customer-edit")]]),x(e($,{modelValue:p(u),"onUpdate:modelValue":T[1]||(T[1]=m=>S(u)?u.value=m:u=m),width:"auto"},{default:t(()=>[e(ue,{customer:c.value,onPaymentModalStatus:r},null,8,["customer"])]),_:1},8,["modelValue"]),[[g,p(i).can("customer-payment")]]),x(e($,{modelValue:p(a),"onUpdate:modelValue":T[2]||(T[2]=m=>S(a)?a.value=m:a=m),width:"auto"},{default:t(()=>[e(me,{customer:c.value,onPaymentHistoryModalStatus:C},null,8,["customer"])]),_:1},8,["modelValue"]),[[g,p(i).can("customer-history")]])]),_:1})]),_:1})]),_:1}))}},be=o("h1",null,"Hello",-1),Ce={__name:"customer",setup(U){let i=H();const n=J(),c=W();j(async()=>{await n.updateProductList()});function l(){c.updateCategoryList(),c.updateProductTypeList(),c.updateUnitTypeList()}const u=V("list");return(a,d)=>(y(),h("div",null,[e(ee,{modelValue:u.value,"onUpdate:modelValue":d[0]||(d[0]=r=>u.value=r),"show-arrows":""},{default:t(()=>[x(e(z,{value:"list"},{default:t(()=>[e(N,{size:"20",start:"",icon:"la:list-alt"}),w(" List ")]),_:1},512),[[g,p(i).can("customer-list-view")]]),x(e(z,{value:"create",onClick:l},{default:t(()=>[e(N,{size:"20",start:"",icon:"uit:create-dashboard"}),w(" Create ")]),_:1},512),[[g,p(i).can("customer-create")]])]),_:1},8,["modelValue"]),e(Q),e(te,{modelValue:u.value,"onUpdate:modelValue":d[1]||(d[1]=r=>u.value=r),class:"mt-5 disable-tab-transition",touch:!1},{default:t(()=>[x(e(E,{value:"create"},{default:t(()=>[e(le)]),_:1},512),[[g,p(i).can("customer-list-view")]]),x(e(E,{value:"list"},{default:t(()=>[e(ye)]),_:1},512),[[g,p(i).can("customer-create")]]),e(E,{value:"test","onGroup:selected":p(n).updateProductList},{default:t(()=>[be]),_:1},8,["onGroup:selected"])]),_:1},8,["modelValue"])]))}};typeof Y=="function"&&Y(Ce);export{Ce as default};
