import{U as y,o as C,W as P,w as t,a as e,e as o,X as M,Y as $,a1 as L,$ as b,j as q,a0 as V,l as k,k as U,b3 as N,b4 as A,bl as G,t as v,i as _,a$ as j,b as s,a3 as H,c as T,F as X,a4 as Z,aY as I,as as x,az as g,T as D,bw as S,aZ as J,a_ as W,_ as K,m as O}from"./index.b5420dcf.js";import{V as F}from"./VForm.6c33229d.js";import{V as z}from"./VAutocomplete.1333a986.js";import"./moment.9709ab41.js";import{m as Q}from"./moment.6005d801.js";import{V as ee}from"./VTextarea.e2ec848d.js";import{V as E}from"./VDialog.9b17bdf0.js";import{V as R,a as te,b as Y,c as le}from"./VWindowItem.54a4c8cd.js";import"./VSelect.f7a3c048.js";import"./VCheckboxBtn.fdfea072.js";const ae={__name:"AddCustomer",setup(w){const i={name:null,contact_no:null,village:null,city:null,email:null,total_spend:null,total_due:null},n=y(structuredClone(i)),c=async()=>{try{(await N.post(A.createCustomer,n.value)).data.status&&(n.value=y(structuredClone(i)))}catch(u){console.log(u)}};return(u,l)=>(C(),P(b,{justify:"center"},{default:t(()=>[e(o,{cols:"12",md:"10"},{default:t(()=>[e(M,{title:"Add Customer"},{default:t(()=>[e($,null,{default:t(()=>[e(F,{onSubmit:l[7]||(l[7]=L(()=>{},["prevent"]))},{default:t(()=>[e(b,null,{default:t(()=>[e(o,{cols:"12",md:"3"},{default:t(()=>[e(q,{width:"100%",src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR4rg2uXCXcgz5EOZDYdyOiJl_BkMOjgqppYsJ5nPTp5Zwu_0sGhxLFf7F3Yh8wy3tT5dE&usqp=CAU"})]),_:1}),e(o,{cols:"12",md:"9"},{default:t(()=>[e(o,{cols:"12"},{default:t(()=>[e(V,{modelValue:n.value.name,"onUpdate:modelValue":l[0]||(l[0]=a=>n.value.name=a),label:"Customer Name",placeholder:"Customer Name",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(o,{cols:"12"},{default:t(()=>[e(V,{modelValue:n.value.contact_no,"onUpdate:modelValue":l[1]||(l[1]=a=>n.value.contact_no=a),label:"Contact Number",placeholder:"Contact Number",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(o,{cols:"12"},{default:t(()=>[e(b,null,{default:t(()=>[e(o,{cols:"6"},{default:t(()=>[e(V,{modelValue:n.value.village,"onUpdate:modelValue":l[2]||(l[2]=a=>n.value.village=a),label:"Village",placeholder:"Village",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(o,{cols:"6"},{default:t(()=>[e(z,{modelValue:n.value.city,"onUpdate:modelValue":l[3]||(l[3]=a=>n.value.city=a),items:{},label:"City",placeholder:"City",variant:"underlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(o,{cols:"12"},{default:t(()=>[e(V,{modelValue:n.value.email,"onUpdate:modelValue":l[4]||(l[4]=a=>n.value.email=a),label:"Email",placeholder:"Email",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(o,{cols:"12"},{default:t(()=>[e(b,null,{default:t(()=>[e(o,{cols:"6"},{default:t(()=>[e(V,{modelValue:n.value.total_spend,"onUpdate:modelValue":l[5]||(l[5]=a=>n.value.total_spend=a),label:"Total Spend",placeholder:"Total Spend",variant:"underlined",type:"number"},null,8,["modelValue"])]),_:1}),e(o,{cols:"6"},{default:t(()=>[e(V,{modelValue:n.value.total_due,"onUpdate:modelValue":l[6]||(l[6]=a=>n.value.total_due=a),label:"Total Due",placeholder:"Total Due",variant:"underlined",type:"number"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(o,{cols:"12",class:"d-flex gap-4"},{default:t(()=>[e(k,{type:"submit",onClick:c},{default:t(()=>[U(" Submit ")]),_:1}),e(k,{type:"reset",color:"secondary",variant:"tonal"},{default:t(()=>[U(" Reset ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},ue={__name:"CustomerEdit",props:["customer"],emits:["edit-modal-status"],setup(w,{emit:i}){const n=w,c=n.customer,u=y(c),l=async()=>{try{const a=A.editCustomer+"/"+n.customer.customer_id;(await N.put(a,u.value)).data.status&&i("edit-modal-status",!1)}catch(a){console.log(a)}};return(a,d)=>(C(),P(b,{justify:"center"},{default:t(()=>[e(o,{cols:"12",md:"10"},{default:t(()=>[e(M,{title:"Add Customer"},{default:t(()=>[e($,null,{default:t(()=>[e(F,{onSubmit:d[7]||(d[7]=L(()=>{},["prevent"]))},{default:t(()=>[e(b,null,{default:t(()=>[e(o,{cols:"12",md:"3"},{default:t(()=>[e(q,{width:"100%",src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR4rg2uXCXcgz5EOZDYdyOiJl_BkMOjgqppYsJ5nPTp5Zwu_0sGhxLFf7F3Yh8wy3tT5dE&usqp=CAU"})]),_:1}),e(o,{cols:"12",md:"9"},{default:t(()=>[e(o,{cols:"12"},{default:t(()=>[e(V,{modelValue:u.value.name,"onUpdate:modelValue":d[0]||(d[0]=m=>u.value.name=m),label:"Customer Name",placeholder:"Customer Name",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(o,{cols:"12"},{default:t(()=>[e(V,{modelValue:u.value.contact_no,"onUpdate:modelValue":d[1]||(d[1]=m=>u.value.contact_no=m),label:"Contact Number",placeholder:"Contact Number",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(o,{cols:"12"},{default:t(()=>[e(b,null,{default:t(()=>[e(o,{cols:"6"},{default:t(()=>[e(V,{modelValue:u.value.village,"onUpdate:modelValue":d[2]||(d[2]=m=>u.value.village=m),label:"Village",placeholder:"Village",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(o,{cols:"6"},{default:t(()=>[e(z,{modelValue:u.value.city,"onUpdate:modelValue":d[3]||(d[3]=m=>u.value.city=m),items:{},label:"City",placeholder:"City",variant:"underlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(o,{cols:"12"},{default:t(()=>[e(V,{modelValue:u.value.email,"onUpdate:modelValue":d[4]||(d[4]=m=>u.value.email=m),label:"Email",placeholder:"Email",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(o,{cols:"12"},{default:t(()=>[e(b,null,{default:t(()=>[e(o,{cols:"6"},{default:t(()=>[e(V,{modelValue:u.value.total_spend,"onUpdate:modelValue":d[5]||(d[5]=m=>u.value.total_spend=m),label:"Total Spend",placeholder:"Total Spend",variant:"underlined",type:"number"},null,8,["modelValue"])]),_:1}),e(o,{cols:"6"},{default:t(()=>[e(V,{modelValue:u.value.total_due,"onUpdate:modelValue":d[6]||(d[6]=m=>u.value.total_due=m),label:"Total Due",placeholder:"Total Due",variant:"underlined",type:"number"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(o,{cols:"12",class:"d-flex gap-4"},{default:t(()=>[e(k,{type:"submit",onClick:l},{default:t(()=>[U(" Submit ")]),_:1}),e(k,{type:"reset",color:"secondary",variant:"tonal"},{default:t(()=>[U(" Reset ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},oe={__name:"CustomerPayment",props:["customer"],emits:["payment-modal-status"],setup(w,{emit:i}){const n=w;let c=[{title:"Deposit",value:1},{title:"Due",value:0}],u={amount:null,payment_type:1,message:null,date:Q().format("YYYY-MM-DD")};const l=y(structuredClone(u)),a=n.customer,d=y(a),m=async()=>{try{const h=A.editCustomer+"/"+n.customer.customer_id+"/payment";(await N.post(h,l.value)).data.status&&(l.value=y(a),i("payment-modal-status",!1))}catch(h){console.log(h)}};return(h,r)=>(C(),P(b,{justify:"center"},{default:t(()=>[e(o,{cols:"12",md:"10"},{default:t(()=>[e(M,null,{default:t(()=>[e(G,null,{default:t(()=>[U(v(d.value.name)+" Payment ",1)]),_:1}),e($,null,{default:t(()=>[e(F,{onSubmit:r[5]||(r[5]=L(()=>{},["prevent"]))},{default:t(()=>[e(b,null,{default:t(()=>[e(o,{cols:"12"},{default:t(()=>[e(V,{modelValue:l.value.date,"onUpdate:modelValue":r[0]||(r[0]=f=>l.value.date=f),label:"Order Date",placeholder:"Order Date",type:"date",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(o,{cols:"12"},{default:t(()=>[e(z,{modelValue:l.value.payment_type,"onUpdate:modelValue":r[1]||(r[1]=f=>l.value.payment_type=f),items:_(c),label:"Product Type",placeholder:"Product Type",variant:"underlined"},null,8,["modelValue","items"])]),_:1}),e(o,{cols:"12"},{default:t(()=>[e(V,{modelValue:l.value.amount,"onUpdate:modelValue":r[2]||(r[2]=f=>l.value.amount=f),label:"Amount",placeholder:"Amount",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(o,{cols:"12"},{default:t(()=>[e(ee,{modelValue:l.value.message,"onUpdate:modelValue":r[3]||(r[3]=f=>l.value.message=f),label:"Message",placeholder:"Message",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(o,{cols:"12",class:"d-flex gap-4"},{default:t(()=>[e(k,{type:"submit",onClick:m},{default:t(()=>[U(" Submit ")]),_:1}),e(k,{type:"reset",color:"secondary",variant:"tonal",onClick:r[4]||(r[4]=f=>i("payment-modal-status",!1))},{default:t(()=>[U(" Close ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},se=s("thead",null,[s("tr",null,[s("th",{class:"text-uppercase"}," Transaction ID "),s("th",{class:"text-uppercase"}," Name "),s("th",{class:"text-uppercase"}," Ref "),s("th",{class:"text-center text-uppercase"}," Time "),s("th",{class:"text-center text-uppercase"}," Pre Amount "),s("th",{class:"text-center text-uppercase"}," Amount "),s("th",{class:"text-center text-uppercase"}," Final ")])],-1),ne={class:"text-center"},de={class:"text-center"},re={class:"text-center"},ie={key:0},me={key:1},ce={class:"text-center"},pe={__name:"CustomerPaymentHistory",props:["customer"],setup(w){const n=w.customer,c=y([]);return j(async()=>{let u=await N.get(A.getCustomer+"/"+n.customer_id+"/payment");c.value=u.data.data}),(u,l)=>(C(),P(b,{justify:"center"},{default:t(()=>[e(o,{cols:"12"},{default:t(()=>[e(M,null,{default:t(()=>[e(G,null,{default:t(()=>[U(v(_(n).name)+" ",1),s("span",null,v(c.value.current),1)]),_:1}),e($,null,{default:t(()=>[e(b,{style:{"max-height":"600px","overflow-y":"scroll"}},{default:t(()=>[e(H,null,{default:t(()=>[se,s("tbody",null,[(C(!0),T(X,null,Z(c.value.transaction,a=>(C(),T("tr",{key:a.transaction_id},[s("td",null,v(a.transaction_id),1),s("td",null,v(a.customer_name),1),s("td",null,v(a.ref),1),s("td",ne,v(a.created_at),1),s("td",de,v(a.pre_amount),1),s("td",re,[a.type?(C(),T("span",ie," - ")):(C(),T("span",me," + ")),U(" "+v(a.amount),1)]),s("td",ce,v(a.post_amount),1)]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},_e=s("thead",null,[s("tr",null,[s("th",{class:"text-uppercase"}," Name "),s("th",{class:"text-center text-uppercase"}," Village "),s("th",{class:"text-center text-uppercase"}," Contact No "),s("th",{class:"text-center text-uppercase"}," Total Due "),s("th",{class:"text-center text-uppercase"}," Action ")])],-1),fe={class:"text-center"},ve={class:"text-center"},Ve={class:"text-center"},ye={class:"text-center"},be={__name:"CustomerList",setup(w){let i=I();const n=y([]),c=y("");let u=y(!1),l=y(!1),a=y(!1);function d(r){u.value=r}function m(r){l.value=r}function h(r){a.value=r}return j(async()=>{let r=await N.get(A.getCustomer);n.value=r.data.data}),(r,f)=>(C(),P(b,{justify:"center"},{default:t(()=>[e(o,{cols:"12"},{default:t(()=>[e(M,{title:"Basic"},{default:t(()=>[e(H,null,{default:t(()=>[_e,s("tbody",null,[(C(!0),T(X,null,Z(n.value,p=>(C(),T("tr",{key:p.customer_id},[s("td",null,v(p.name)+" - "+v(p.village),1),s("td",fe,v(p.village),1),s("td",ve,v(p.contact_no),1),s("td",Ve,[x(s("span",null,v(p.total_due),513),[[g,_(i).can("customer-due-view")]])]),s("td",ye,[x(e(D,{size:"20",start:"",icon:"tabler:edit",onClick:B=>{c.value=p,S(u)?u.value=!0:u=!0}},null,8,["onClick"]),[[g,_(i).can("customer-edit")]]),x(e(D,{size:"20",start:"",icon:"majesticons:money-line",onClick:B=>{c.value=p,S(l)?l.value=!0:l=!0}},null,8,["onClick"]),[[g,_(i).can("customer-payment")]]),x(e(D,{size:"20",start:"",icon:"mdi-clipboard-text-history-outline",onClick:B=>{c.value=p,S(a)?a.value=!0:a=!0}},null,8,["onClick"]),[[g,_(i).can("customer-history")]])])]))),128))])]),_:1}),x(e(E,{modelValue:_(u),"onUpdate:modelValue":f[0]||(f[0]=p=>S(u)?u.value=p:u=p),width:"auto"},{default:t(()=>[e(ue,{customer:c.value,onEditModalStatus:d},null,8,["customer"])]),_:1},8,["modelValue"]),[[g,_(i).can("customer-edit")]]),x(e(E,{modelValue:_(l),"onUpdate:modelValue":f[1]||(f[1]=p=>S(l)?l.value=p:l=p),width:"auto"},{default:t(()=>[e(oe,{customer:c.value,onPaymentModalStatus:m},null,8,["customer"])]),_:1},8,["modelValue"]),[[g,_(i).can("customer-payment")]]),x(e(E,{modelValue:_(a),"onUpdate:modelValue":f[2]||(f[2]=p=>S(a)?a.value=p:a=p),width:"auto"},{default:t(()=>[e(pe,{customer:c.value,onPaymentHistoryModalStatus:h},null,8,["customer"])]),_:1},8,["modelValue"]),[[g,_(i).can("customer-history")]])]),_:1})]),_:1})]),_:1}))}},Ce=s("h1",null,"Hello",-1),xe={__name:"customer",setup(w){let i=I();const n=J(),c=W();j(async()=>{await n.updateProductList()});function u(){c.updateCategoryList(),c.updateProductTypeList(),c.updateUnitTypeList()}const l=y("list");return(a,d)=>(C(),T("div",null,[e(te,{modelValue:l.value,"onUpdate:modelValue":d[0]||(d[0]=m=>l.value=m),"show-arrows":""},{default:t(()=>[x(e(R,{value:"list"},{default:t(()=>[e(D,{size:"20",start:"",icon:"la:list-alt"}),U(" List ")]),_:1},512),[[g,_(i).can("customer-list-view")]]),x(e(R,{value:"create",onClick:u},{default:t(()=>[e(D,{size:"20",start:"",icon:"uit:create-dashboard"}),U(" Create ")]),_:1},512),[[g,_(i).can("customer-create")]])]),_:1},8,["modelValue"]),e(K),e(le,{modelValue:l.value,"onUpdate:modelValue":d[1]||(d[1]=m=>l.value=m),class:"mt-5 disable-tab-transition",touch:!1},{default:t(()=>[x(e(Y,{value:"create"},{default:t(()=>[e(ae)]),_:1},512),[[g,_(i).can("customer-list-view")]]),x(e(Y,{value:"list"},{default:t(()=>[e(be)]),_:1},512),[[g,_(i).can("customer-create")]]),e(Y,{value:"test","onGroup:selected":_(n).updateProductList},{default:t(()=>[Ce]),_:1},8,["onGroup:selected"])]),_:1},8,["modelValue"])]))}};typeof O=="function"&&O(xe);export{xe as default};
