import{u as W,h as j}from"./tab.a59d80d1.js";import{_ as I}from"./UpdateOrder.71cf93ef.js";import{aY as k,bo as R,a$ as g,o as n,W as b,w as l,a as e,e as u,X as T,Y as E,a1 as P,$ as V,a0 as _,i as a,c as f,F as w,a4 as v,l as S,k as U,b4 as L,b3 as B,U as $,bl as Y,as as X,T as C,az as q,a3 as G,b as p,t as y,bB as H,bC as J,_ as K,m as M}from"./index.18d9e5c6.js";import"./moment.9709ab41.js";import{u as h}from"./users.ad8d43a4.js";import A from"./PermissionGroup.46457eb1.js";import{V as z}from"./VForm.34c726f9.js";import{V as D}from"./VCheckbox.a4663741.js";import{V as N}from"./VDialog.bcb03a98.js";import{V as O,a as Q,b as Z,c as ee}from"./VWindowItem.6db79783.js";import"./report.64f3464d.js";import"./sellsOrders.7cc85978.js";import"./VAutocomplete.9b8c2bfa.js";import"./VSelect.3f8543e3.js";import"./VCheckboxBtn.ce0f164e.js";const le={__name:"UserEdit",props:["user"],setup(x){const d=x;let c=h(),r=k(),o=R({name:d.user.name,email:d.user.email,roles:d.user.roles.map(t=>t.id),password:null,password_confirmation:null});g(()=>{r.roles.length||r.getRoleList()});const m=async()=>{try{let t=L.users+"/"+d.user.user_id;const s=await B.put(t,o);c.getUserList(),c.editModalStatus=!1}catch(t){console.log(t)}};return(t,s)=>(n(),b(V,{justify:"center"},{default:l(()=>[e(u,{cols:"12",md:"10"},{default:l(()=>[e(T,{title:"Edit User"},{default:l(()=>[e(E,null,{default:l(()=>[e(z,{onSubmit:s[5]||(s[5]=P(()=>{},["prevent"]))},{default:l(()=>[e(V,null,{default:l(()=>[e(u,{cols:"12"},{default:l(()=>[e(u,{cols:"12"},{default:l(()=>[e(_,{modelValue:a(o).name,"onUpdate:modelValue":s[0]||(s[0]=i=>a(o).name=i),label:"User Name",placeholder:"User Name",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12"},{default:l(()=>[e(_,{modelValue:a(o).email,"onUpdate:modelValue":s[1]||(s[1]=i=>a(o).email=i),label:"User Email",placeholder:"User Email",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",style:{padding:"0"}},{default:l(()=>[e(A,{title:"Role"},{default:l(()=>[(n(!0),f(w,null,v(a(r).roles,i=>(n(),b(u,{key:i.id,cols:"3",class:"m-0 p-0"},{default:l(()=>[e(D,{modelValue:a(o).roles,"onUpdate:modelValue":s[2]||(s[2]=F=>a(o).roles=F),label:i.name,value:i.id},null,8,["modelValue","label","value"])]),_:2},1024))),128))]),_:1})]),_:1}),e(u,{cols:"12"},{default:l(()=>[e(V,null,{default:l(()=>[e(u,{cols:"6"},{default:l(()=>[e(_,{modelValue:a(o).password,"onUpdate:modelValue":s[3]||(s[3]=i=>a(o).password=i),label:"Password",placeholder:"Password",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(u,{cols:"6"},{default:l(()=>[e(_,{modelValue:a(o).password_confirmation,"onUpdate:modelValue":s[4]||(s[4]=i=>a(o).password_confirmation=i),label:"Confirm Password",placeholder:"Confirm Password",variant:"underlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(u,{cols:"12",class:"d-flex gap-4"},{default:l(()=>[e(S,{onClick:m},{default:l(()=>[U(" Submit ")]),_:1}),e(S,{type:"reset",color:"secondary",variant:"tonal"},{default:l(()=>[U(" Reset ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},ae={__name:"UserCreate",setup(x){let d=h(),c=k(),r=R({name:"",email:"",roles:[],password:null,password_confirmation:null});g(()=>{c.roles.length||c.getRoleList()});const o=async()=>{try{let m=L.users;const t=await B.post(m,r);d.getUserList(),d.userCreateModalStatus=!1}catch(m){console.log(m)}};return(m,t)=>(n(),b(V,{justify:"center"},{default:l(()=>[e(u,{cols:"12",md:"10"},{default:l(()=>[e(T,{title:"Add User"},{default:l(()=>[e(E,null,{default:l(()=>[e(z,{onSubmit:t[5]||(t[5]=P(()=>{},["prevent"]))},{default:l(()=>[e(V,null,{default:l(()=>[e(u,{cols:"12"},{default:l(()=>[e(u,{cols:"12"},{default:l(()=>[e(_,{modelValue:a(r).name,"onUpdate:modelValue":t[0]||(t[0]=s=>a(r).name=s),label:"User Name",placeholder:"User Name",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12"},{default:l(()=>[e(_,{modelValue:a(r).email,"onUpdate:modelValue":t[1]||(t[1]=s=>a(r).email=s),label:"User Email",placeholder:"User Email",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",style:{padding:"0"}},{default:l(()=>[e(A,{title:"Role"},{default:l(()=>[(n(!0),f(w,null,v(a(c).roles,s=>(n(),b(u,{key:s.id,cols:"3",class:"m-0 p-0"},{default:l(()=>[e(D,{modelValue:a(r).roles,"onUpdate:modelValue":t[2]||(t[2]=i=>a(r).roles=i),label:s.name,value:s.id},null,8,["modelValue","label","value"])]),_:2},1024))),128))]),_:1})]),_:1}),e(u,{cols:"12"},{default:l(()=>[e(V,null,{default:l(()=>[e(u,{cols:"6"},{default:l(()=>[e(_,{modelValue:a(r).password,"onUpdate:modelValue":t[3]||(t[3]=s=>a(r).password=s),label:"Password",placeholder:"Password",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(u,{cols:"6"},{default:l(()=>[e(_,{modelValue:a(r).password_confirmation,"onUpdate:modelValue":t[4]||(t[4]=s=>a(r).password_confirmation=s),label:"Confirm Password",placeholder:"Confirm Password",variant:"underlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(u,{cols:"12",class:"d-flex gap-4"},{default:l(()=>[e(S,{onClick:o},{default:l(()=>[U(" Submit ")]),_:1}),e(S,{type:"reset",color:"secondary",variant:"tonal"},{default:l(()=>[U(" Reset ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},te=p("thead",null,[p("tr",null,[p("th",{class:"text-uppercase"}," Name "),p("th",{class:"text-center text-uppercase"}," Email "),p("th",{class:"text-center text-uppercase"}," Warehouse "),p("th",{class:"text-center text-uppercase"}," Role "),p("th",{class:"text-center text-uppercase"}," Action ")])],-1),se={class:"text-center"},oe={class:"text-center"},re={class:"text-center"},de={key:0},ue={class:"text-center"},ne={__name:"UserList",setup(x){let d=h(),c=k();g(()=>{d.getUserList()});let r=null;return $(!1),$(null),(o,m)=>(n(),b(V,{justify:"center"},{default:l(()=>[e(u,{cols:"12"},{default:l(()=>[e(T,null,{default:l(()=>[e(Y,null,{default:l(()=>[U(" Users "),X(e(C,{size:"1.5rem",icon:"material-symbols:add-circle-outline-rounded",onClick:m[0]||(m[0]=t=>a(d).userCreateModalStatus=!0)},null,512),[[q,a(c).can("user-create")]])]),_:1}),e(G,null,{default:l(()=>[te,p("tbody",null,[(n(!0),f(w,null,v(a(d).users,t=>(n(),f("tr",{key:t.user_id},[p("td",null,y(t.name),1),p("td",se,y(t.email),1),p("td",oe,y(t.warehouse_name),1),p("td",re,[(n(!0),f(w,null,v(t.roles,(s,i)=>(n(),f("span",{key:s.id},[i!==0?(n(),f("span",de,",")):H("",!0),U(" "+y(s.name),1)]))),128))]),p("td",ue,[e(C,{size:"20",start:"",icon:"tabler:edit",onClick:s=>{J(r)?r.value=t:r=t,a(d).editModalStatus=!0}},null,8,["onClick"])])]))),128))])]),_:1}),e(N,{modelValue:a(d).editModalStatus,"onUpdate:modelValue":m[1]||(m[1]=t=>a(d).editModalStatus=t),"max-width":"600"},{default:l(()=>[e(le,{user:a(r)},null,8,["user"])]),_:1},8,["modelValue"]),e(N,{modelValue:a(d).userCreateModalStatus,"onUpdate:modelValue":m[2]||(m[2]=t=>a(d).userCreateModalStatus=t),"max-width":"600"},{default:l(()=>[e(ae,{user:a(r)},null,8,["user"])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}))}},ie={key:0},me={key:1},pe={__name:"users",setup(x){const d=W();return d.tabs=[],d.addTab({id:j.randomNumber(),name:"Users",componentType:"main"}),(c,r)=>(n(),f("div",null,[e(Q,{modelValue:a(d).selectedTab,"onUpdate:modelValue":r[0]||(r[0]=o=>a(d).selectedTab=o),"show-arrows":""},{default:l(()=>[(n(!0),f(w,null,v(a(d).tabs,o=>(n(),b(O,{key:o.id,value:o.id},{default:l(()=>[e(C,{size:"20",start:"",icon:"lucide:user-round"}),U(" "+y(o.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),e(K),e(ee,{modelValue:a(d).selectedTab,"onUpdate:modelValue":r[1]||(r[1]=o=>a(d).selectedTab=o),class:"mt-5 disable-tab-transition",touch:!1},{default:l(()=>[(n(!0),f(w,null,v(a(d).tabs,o=>(n(),b(Z,{key:o.id,value:o.id},{default:l(()=>[o.componentType=="main"?(n(),f("div",ie,[e(ne)])):(n(),f("div",me,[e(I,{ordercode:o.id},null,8,["ordercode"])]))]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]))}};typeof M=="function"&&M(pe);export{pe as default};
