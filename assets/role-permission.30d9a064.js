import{u as D,h as E}from"./tab.bb71b7eb.js";import{_ as W}from"./UpdateOrder.bd233bb7.js";import{aY as S,bo as U,o,W as f,w as t,a as e,e as c,X as T,Y as $,a1 as M,$ as x,a0 as N,c as i,F as _,a4 as V,i as n,l as L,k as v,b3 as A,b4 as B,U as g,a$ as I,bl as Y,T as R,a3 as X,b as p,t as w,bB as q,bC as G,_ as H,m as C}from"./index.bc5f5d14.js";import"./moment.9709ab41.js";import"./users.6b844d86.js";import F from"./PermissionGroup.2d96b38c.js";import{V as P}from"./VForm.fcd847b2.js";import{V as j}from"./VCheckbox.6679459f.js";import{V as h}from"./VDialog.e9833073.js";import{V as J,a as K,b as O,c as Q}from"./VWindowItem.f561eec7.js";import"./report.662c94ca.js";import"./sellsOrders.9b3bdc06.js";import"./VAutocomplete.7b60ac8d.js";import"./VSelect.e271dfb6.js";import"./VCheckboxBtn.6c13098b.js";const Z={__name:"RoleCreate",setup(k){let a=S();const r=U({name:"",permissions:[]}),m=async()=>{try{const l=await A.post(B.roles,r);await a.getRoleList(),await a.getPermissionList(),a.createModalStatus=!1}catch(l){console.log(l)}};return(l,s)=>(o(),f(x,{justify:"center"},{default:t(()=>[e(c,{cols:"12",md:"10"},{default:t(()=>[e(T,{title:"Add Role"},{default:t(()=>[e($,null,{default:t(()=>[e(P,{onSubmit:s[2]||(s[2]=M(()=>{},["prevent"]))},{default:t(()=>[e(x,{style:{"max-height":"600px","overflow-y":"scroll"}},{default:t(()=>[e(c,{cols:"12"},{default:t(()=>[e(N,{modelValue:r.name,"onUpdate:modelValue":s[0]||(s[0]=d=>r.name=d),label:"Role Name",placeholder:"Role Name",variant:"underlined"},null,8,["modelValue"])]),_:1}),(o(!0),i(_,null,V(n(a).permissionTitle,d=>(o(),f(F,{key:d,title:d},{default:t(()=>[(o(!0),i(_,null,V(n(a).permissions.filter(u=>u.title==d),u=>(o(),f(c,{key:u.id,cols:"3",class:"mb-0 pb-0"},{default:t(()=>[e(j,{modelValue:r.permissions,"onUpdate:modelValue":s[1]||(s[1]=b=>r.permissions=b),label:u.name,value:u.id},null,8,["modelValue","label","value"])]),_:2},1024))),128))]),_:2},1032,["title"]))),128)),e(c,{cols:"12",class:"d-flex gap-4"},{default:t(()=>[e(L,{type:"submit",onClick:m},{default:t(()=>[v(" Create ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},ee={__name:"RoleEdit",props:["roleid"],setup(k){const a=k;let r=S(),m=r.getSelectedRole(a.roleid);const l=U({name:m.name,permissions:m.permissions.map(d=>d.id)}),s=async()=>{try{let d=B.roles+"/"+a.roleid;const u=await A.put(d,l);await r.getRoleList(),await r.getPermissionList(),r.editModalStatus=!1}catch(d){console.log(d)}};return(d,u)=>(o(),f(x,{justify:"center"},{default:t(()=>[e(c,{cols:"12",md:"10"},{default:t(()=>[e(T,{title:"Edit Role"},{default:t(()=>[e($,null,{default:t(()=>[e(P,{onSubmit:u[2]||(u[2]=M(()=>{},["prevent"]))},{default:t(()=>[e(x,{style:{"max-height":"600px","overflow-y":"scroll"}},{default:t(()=>[e(c,{cols:"12"},{default:t(()=>[e(N,{modelValue:l.name,"onUpdate:modelValue":u[0]||(u[0]=b=>l.name=b),label:"Role Name",placeholder:"Role Name",variant:"underlined"},null,8,["modelValue"])]),_:1}),(o(!0),i(_,null,V(n(r).permissionTitle,b=>(o(),f(F,{key:b,title:b},{default:t(()=>[(o(!0),i(_,null,V(n(r).permissions.filter(y=>y.title==b),y=>(o(),f(c,{key:y.id,cols:"3",class:"mb-0 pb-0"},{default:t(()=>[e(j,{modelValue:l.permissions,"onUpdate:modelValue":u[1]||(u[1]=z=>l.permissions=z),label:y.name,value:y.id},null,8,["modelValue","label","value"])]),_:2},1024))),128))]),_:2},1032,["title"]))),128)),e(c,{cols:"12",class:"d-flex gap-4"},{default:t(()=>[e(L,{type:"submit",onClick:s},{default:t(()=>[v(" Update ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},te=p("thead",null,[p("tr",null,[p("th",{class:"text-uppercase"}," Name "),p("th",{class:"text-center text-uppercase"}," Permissions "),p("th",{class:"text-center text-uppercase"}," Action ")])],-1),le={class:"text-center"},ae={key:0},oe={class:"text-center"},se={__name:"RoleList",setup(k){let a=S(),r=g();return I(()=>{a.getRoleList(),a.getPermissionList()}),g(null),(m,l)=>(o(),f(x,{justify:"center"},{default:t(()=>[e(c,{cols:"12"},{default:t(()=>[e(T,null,{default:t(()=>[e(Y,null,{default:t(()=>[v(" Roles "),e(R,{size:"1.5rem",icon:"material-symbols:add-circle-outline-rounded",onClick:l[0]||(l[0]=s=>n(a).createModalStatus=!0)})]),_:1}),e(X,null,{default:t(()=>[te,p("tbody",null,[(o(!0),i(_,null,V(n(a).roles,s=>(o(),i("tr",{key:s.id},[p("td",null,w(s.name),1),p("td",le,[(o(!0),i(_,null,V(s.permissions,(d,u)=>(o(),i("span",{key:d.id},[u!==0?(o(),i("span",ae,",")):q("",!0),v(" "+w(d.name),1)]))),128))]),p("td",oe,[e(R,{size:"20",start:"",icon:"tabler:edit",onClick:d=>{G(r)?r.value=s.id:r=s.id,n(a).editModalStatus=!0}},null,8,["onClick"])])]))),128))])]),_:1}),e(h,{modelValue:n(a).createModalStatus,"onUpdate:modelValue":l[1]||(l[1]=s=>n(a).createModalStatus=s),"max-width":"1200"},{default:t(()=>[e(Z)]),_:1},8,["modelValue"]),e(h,{modelValue:n(a).editModalStatus,"onUpdate:modelValue":l[2]||(l[2]=s=>n(a).editModalStatus=s),"max-width":"1200"},{default:t(()=>[e(ee,{roleid:n(r)},null,8,["roleid"])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}))}},re={key:0},ne={key:1},de={__name:"role-permission",setup(k){const a=D();return a.tabs=[],a.addTab({id:E.randomNumber(),name:"Role",componentType:"main"}),(r,m)=>(o(),i("div",null,[e(K,{modelValue:n(a).selectedTab,"onUpdate:modelValue":m[0]||(m[0]=l=>n(a).selectedTab=l),"show-arrows":""},{default:t(()=>[(o(!0),i(_,null,V(n(a).tabs,l=>(o(),f(J,{key:l.id,value:l.id},{default:t(()=>[e(R,{size:"20",start:"",icon:"mdi-bell-outline"}),v(" "+w(l.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),e(H),e(Q,{modelValue:n(a).selectedTab,"onUpdate:modelValue":m[1]||(m[1]=l=>n(a).selectedTab=l),class:"mt-5 disable-tab-transition",touch:!1},{default:t(()=>[(o(!0),i(_,null,V(n(a).tabs,l=>(o(),f(O,{key:l.id,value:l.id},{default:t(()=>[l.componentType=="main"?(o(),i("div",re,[e(se)])):(o(),i("div",ne,[e(W,{ordercode:l.id},null,8,["ordercode"])]))]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]))}};typeof C=="function"&&C(de);export{de as default};
