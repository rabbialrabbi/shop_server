import{aY as B,o as u,c as _,a as e,w as s,e as d,X as O,bl as v,k as i,Y as P,$ as p,F as f,a4 as h,i as l,W as T,t as a,a0 as A,a3 as N,b as t,as as b,az as V,T as C,_ as R,m as w}from"./index.20407f71.js";import{u as U}from"./report.d1289f37.js";import{u as S,h as z}from"./tab.c709912c.js";import"./moment.9709ab41.js";import{u as g}from"./sellsOrders.a5505a7f.js";import{_ as I}from"./UpdateOrder.407dde0f.js";import{V as F,a as W,b as j,c as Y}from"./VWindowItem.88296c7d.js";import"./VAutocomplete.8f917d0e.js";import"./VSelect.1e16402f.js";import"./VCheckboxBtn.406397c1.js";const q=t("p",null,"Customer",-1),E=t("hr",{class:"mt-3 mb-3"},null,-1),Q=t("thead",null,[t("tr",null,[t("th",{class:"text-uppercase"}," Order ID "),t("th",{class:"text-center text-uppercase"}," Customer Name "),t("th",{class:"text-center text-uppercase"}," Total Item "),t("th",{class:"text-center text-uppercase"}," Order Amount "),t("th",{class:"text-center text-uppercase"}," Labour "),t("th",{class:"text-center text-uppercase"}," Discount "),t("th",{class:"text-center text-uppercase"}," Collection "),t("th",{class:"text-center text-uppercase"}," Paid "),t("th",{class:"text-center text-uppercase"}," Balance "),t("th",{class:"text-center text-uppercase"}," Profit "),t("th",{class:"text-center text-uppercase"}," Action ")])],-1),X={class:"text-center"},G={class:"text-center"},H={class:"text-center"},J={class:"text-center"},K={class:"text-center"},M={class:"text-center"},Z={class:"text-center"},tt={class:"text-center"},et={class:"text-center"},st={class:"text-center"},lt=t("td",{colspan:"2",class:"text-center"}," Total ",-1),at={class:"text-center"},ot={class:"text-center"},rt={class:"text-center"},ct={class:"text-center"},dt={class:"text-center"},nt={class:"text-center"},ut={class:"text-center"},it={class:"text-center"},_t={__name:"SalesOrderList",setup(D){let n=B();const o=U(),L=S(),m=g();async function c(x){await m.addUpdateOrder(x.order_code),await L.addTab({id:x.order_code,name:x.customer_name})}function y(){o.getOrderList()}return o.getOrderList(),o.getCollection(),(x,k)=>(u(),_(f,null,[e(p,{justify:"center"},{default:s(()=>[e(d,{cols:"12"},{default:s(()=>[e(O,null,{default:s(()=>[e(v,null,{default:s(()=>[i(" Collection ")]),_:1}),e(P,null,{default:s(()=>[e(p,null,{default:s(()=>[e(d,{cols:"6"}),e(d,{cols:"6"},{default:s(()=>[e(p,null,{default:s(()=>[e(d,{cols:"6",class:"pl-8"},{default:s(()=>[q]),_:1}),e(d,{cols:"6",class:"text-right pr-16"},{default:s(()=>[i("Amount")]),_:1})]),_:1}),(u(!0),_(f,null,h(l(o).customerCollection.details,r=>(u(),T(p,null,{default:s(()=>[e(d,{cols:"6",class:"pl-8"},{default:s(()=>[i(a(r.customer_name),1)]),_:2},1024),e(d,{cols:"6",class:"text-right pr-16"},{default:s(()=>[i(a(r.amount),1)]),_:2},1024)]),_:2},1024))),256)),e(p,null,{default:s(()=>[e(d,{cols:"6",class:"pl-8"},{default:s(()=>[i("Sell")]),_:1}),e(d,{cols:"6",class:"text-right pr-16"},{default:s(()=>[i(a(l(o).salesOrderList.totalPaid),1)]),_:1})]),_:1}),E,e(p,null,{default:s(()=>[e(d,{cols:"6",class:"pl-8"},{default:s(()=>[i("Total")]),_:1}),e(d,{cols:"6",class:"text-right pr-16"},{default:s(()=>[i(a(l(o).salesOrderList.totalPaid+l(o).customerCollection.total),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(p,{justify:"center"},{default:s(()=>[e(d,{cols:"12"},{default:s(()=>[e(O,null,{default:s(()=>[e(v,null,{default:s(()=>[e(p,null,{default:s(()=>[e(d,{cols:"8"},{default:s(()=>[i(" Order list ")]),_:1}),e(d,{cols:"4"},{default:s(()=>[e(A,{modelValue:l(o).salesReportDate,"onUpdate:modelValue":k[0]||(k[0]=r=>l(o).salesReportDate=r),label:"Order Date",placeholder:"Order Date",type:"date",onChange:y},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(N,null,{default:s(()=>[Q,t("tbody",null,[(u(!0),_(f,null,h(l(o).salesOrderList.items,r=>(u(),_("tr",{key:r.order_code},[t("td",null,a(r.order_code),1),t("td",X,a(r.customer_name),1),t("td",G,a(r.order_qty),1),t("td",H,a(r.order_payable_amount),1),t("td",J,a(r.labour),1),t("td",K,a(r.discount),1),t("td",M,a(r.collection),1),t("td",Z,a(r.paid),1),t("td",tt,a(r.balance),1),t("td",et,[b(t("span",null,a(r.profit),513),[[V,l(n).can("report-sales-order-profit")]])]),t("td",st,[b(e(C,{size:"1.5rem",icon:"tabler:edit",onClick:$=>c(r)},null,8,["onClick"]),[[V,l(n).can("report-sales-order-edit")]]),e(C,{size:"1.5rem",icon:"ep:close-bold",onClick:$=>l(m).removeOrder(r.sales_order_id)},null,8,["onClick"])])]))),128)),t("tr",null,[lt,t("td",at,a(l(o).salesOrderList.totalOrderQty),1),t("td",ot,a(l(o).salesOrderList.totalOrderAmount),1),t("td",rt,a(l(o).salesOrderList.totalLabour),1),t("td",ct,a(l(o).salesOrderList.totalDiscount),1),t("td",dt,a(l(o).salesOrderList.totalCollection),1),t("td",nt,a(l(o).salesOrderList.totalPaid),1),t("td",ut,a(l(o).salesOrderList.totalBalance),1),t("td",it,[b(t("span",null,a(l(o).salesOrderList.totalProfit),513),[[V,l(n).can("report-sales-order-profit")]])])])])]),_:1})]),_:1})]),_:1})]),_:1})],64))}},pt={key:0},mt={key:1},ft={__name:"order-list",setup(D){const n=S(),o=g();return n.tabs=[],n.addTab({id:z.randomNumber(),name:"Order List",componentType:"main"}),(L,m)=>(u(),_("div",null,[e(W,{modelValue:l(n).selectedTab,"onUpdate:modelValue":m[0]||(m[0]=c=>l(n).selectedTab=c),"show-arrows":""},{default:s(()=>[(u(!0),_(f,null,h(l(n).tabs,c=>(u(),T(F,{key:c.id,value:c.id,onClick:y=>l(o).addUpdateOrder(c.id)},{default:s(()=>[e(C,{size:"20",start:"",icon:"la:list-alt"}),i(" "+a(c.name),1)]),_:2},1032,["value","onClick"]))),128))]),_:1},8,["modelValue"]),e(R),e(Y,{modelValue:l(n).selectedTab,"onUpdate:modelValue":m[1]||(m[1]=c=>l(n).selectedTab=c),class:"mt-5 disable-tab-transition",touch:!1},{default:s(()=>[(u(!0),_(f,null,h(l(n).tabs,c=>(u(),T(j,{key:c.id,value:c.id},{default:s(()=>[c.componentType=="main"?(u(),_("div",pt,[e(_t)])):(u(),_("div",mt,[e(I,{ordercode:c.id},null,8,["ordercode"])]))]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]))}};typeof w=="function"&&w(ft);export{ft as default};
