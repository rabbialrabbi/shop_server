import{p as oe,aP as de,D as ne,b0 as re,g as B,aQ as se,ae as ie,aR as ce,aS as pe,U as g,a as e,ak as R,b1 as me,b2 as _e,aT as ve,aZ as A,a_ as M,a$ as F,ad as z,o as U,W as S,w as t,e as a,X as $,Y as E,a1 as Y,$ as V,j as W,l as P,k as T,a0 as f,i as y,b3 as Z,b4 as G,aY as ye,c as L,b as _,F as N,a4 as fe,t as C,as as h,az as q,T as Q,a3 as Ve}from"./index.81261210.js";import"./moment.9709ab41.js";import{V as H}from"./VForm.ba5c7b90.js";import{V as x}from"./VAutocomplete.5c8c8686.js";import{V as J}from"./VTextarea.538aa4f7.js";import{a as be,b as ge,c as Ue}from"./VCheckboxBtn.bb996ea2.js";import{V as Ce}from"./VDialog.7e8194f0.js";const K=oe({name:"VSwitch",inheritAttrs:!1,props:{indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...de(),...be()},emits:{"update:indeterminate":p=>!0},setup(p,m){let{attrs:s,slots:o}=m;const i=ne(p,"indeterminate"),{loaderClasses:b}=re(p),l=B(()=>typeof p.loading=="string"&&p.loading!==""?p.loading:p.color),c=se(),d=B(()=>p.id||`switch-${c}`);function n(){i.value&&(i.value=!1)}return ie(()=>{const[j,v]=ce(s),[u,r]=pe(p),[O,Ae]=ge(p),I=g();function X(){var w,k;(w=I.value)==null||(k=w.input)==null||k.click()}return e(ve,R({class:["v-switch",{"v-switch--inset":p.inset},{"v-switch--indeterminate":i.value},b.value]},j,u,{id:d.value}),{...o,default:w=>{let{id:k,isDisabled:ee,isReadonly:te,isValid:le}=w;return e(Ue,R({ref:I},O,{id:k.value,type:"checkbox","onUpdate:modelValue":n,"aria-checked":i.value?"mixed":void 0,disabled:ee.value,readonly:te.value},v),{...o,default:()=>e("div",{class:"v-switch__track",onClick:X},null),input:ae=>{let{textColorClasses:ue}=ae;return e("div",{class:["v-switch__thumb",ue.value]},[p.loading&&e(me,{name:"v-switch",active:!0,color:le.value===!1?void 0:l.value},{default:D=>o.loader?o.loader(D):e(_e,{active:D.isActive,color:D.color,indeterminate:!0,size:"16",width:"2"},null)})])}})}})}),{}}}),Re={__name:"AddProduct",setup(p){A();const m=M();F(async()=>{await m.updateCategoryList(),await m.updateProductTypeList(),await m.updateUnitTypeList()});const s={name:null,category_id:null,product_type_id:null,unit_amount:null,unit_id:null,description:null,selling_price:null,cost_adjust_type:!0,cost:null,available_qty:null,reserved_qty:null,in_transit_qty:null},o=g(structuredClone(s)),i=g(),b=g([]);z(i,c=>{let d=m.productTypes;o.value.category_id=c,d=d.filter(n=>n.category_id===c),d=d.map(n=>({title:n.name,value:n.product_type_id})),b.value=d});const l=async()=>{try{const c=await Z.post(G.createProduct,o.value);console.log(c.data),c.data.status&&(o.value=g(structuredClone(s)),i.value=null)}catch(c){console.log(c)}};return(c,d)=>(U(),S(V,{justify:"center"},{default:t(()=>[e(a,{cols:"12",md:"10"},{default:t(()=>[e($,{title:"Add Product"},{default:t(()=>[e(E,null,{default:t(()=>[e(H,{onSubmit:d[12]||(d[12]=Y(()=>{},["prevent"]))},{default:t(()=>[e(V,null,{default:t(()=>[e(a,{cols:"12",md:"2"},{default:t(()=>[e(W,{width:"100%",src:"https://images.pexels.com/photos/90946/pexels-photo-90946.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"}),e(P,{justify:"center",width:"100%",class:"mt-3"},{default:t(()=>[T(" Upload ")]),_:1})]),_:1}),e(a,{cols:"12",md:"5"},{default:t(()=>[e(a,{cols:"12"},{default:t(()=>[e(f,{modelValue:o.value.name,"onUpdate:modelValue":d[0]||(d[0]=n=>o.value.name=n),label:"Product Name",placeholder:"Product Name",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(a,{cols:"12"},{default:t(()=>[e(x,{modelValue:i.value,"onUpdate:modelValue":d[1]||(d[1]=n=>i.value=n),items:y(m).getCategoriesSelect,label:"Category",placeholder:"Category",variant:"underlined"},null,8,["modelValue","items"])]),_:1}),e(a,{cols:"12"},{default:t(()=>[e(x,{modelValue:o.value.product_type_id,"onUpdate:modelValue":d[2]||(d[2]=n=>o.value.product_type_id=n),items:b.value,label:"Product Type",placeholder:"Product Type",variant:"underlined"},null,8,["modelValue","items"])]),_:1}),e(a,{cols:"12"},{default:t(()=>[e(V,null,{default:t(()=>[e(a,{cols:"6"},{default:t(()=>[e(f,{modelValue:o.value.unit_amount,"onUpdate:modelValue":d[3]||(d[3]=n=>o.value.unit_amount=n),label:"Unit Amount",placeholder:"Unit Amount",variant:"underlined",type:"number"},null,8,["modelValue"])]),_:1}),e(a,{cols:"6"},{default:t(()=>[e(x,{modelValue:o.value.unit_id,"onUpdate:modelValue":d[4]||(d[4]=n=>o.value.unit_id=n),items:y(m).getUnitTypeSelect,label:"Unit Type",placeholder:"Unit Type",variant:"underlined"},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1}),e(a,{cols:"12"},{default:t(()=>[e(J,{modelValue:o.value.description,"onUpdate:modelValue":d[5]||(d[5]=n=>o.value.description=n),label:"Description",placeholder:"Description",variant:"underlined"},null,8,["modelValue"])]),_:1})]),_:1}),e(a,{cols:"12",md:"5"},{default:t(()=>[e(a,{cols:"12"},{default:t(()=>[e(V,null,{default:t(()=>[e(a,{cols:"6"},{default:t(()=>[e(f,{modelValue:o.value.selling_price,"onUpdate:modelValue":d[6]||(d[6]=n=>o.value.selling_price=n),label:"Selling Price",placeholder:"Selling Price",variant:"underlined",type:"number"},null,8,["modelValue"])]),_:1}),e(a,{cols:"6"},{default:t(()=>[e(K,{modelValue:o.value.cost_adjust_type,"onUpdate:modelValue":d[7]||(d[7]=n=>o.value.cost_adjust_type=n),label:"Adjust",variant:"underlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(a,{cols:"12"},{default:t(()=>[e(V,null,{default:t(()=>[e(a,{cols:"6"},{default:t(()=>[e(f,{modelValue:o.value.cost,"onUpdate:modelValue":d[8]||(d[8]=n=>o.value.cost=n),label:"Cost",placeholder:"Cost",variant:"underlined",type:"number"},null,8,["modelValue"])]),_:1}),e(a,{cols:"6"},{default:t(()=>[e(f,{modelValue:o.value.available_qty,"onUpdate:modelValue":d[9]||(d[9]=n=>o.value.available_qty=n),label:"Available Qty",placeholder:"Available Qty",variant:"underlined",type:"number"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(a,{cols:"12"},{default:t(()=>[e(V,null,{default:t(()=>[e(a,{cols:"6"},{default:t(()=>[e(f,{modelValue:o.value.reserved_qty,"onUpdate:modelValue":d[10]||(d[10]=n=>o.value.reserved_qty=n),label:"Reserved Qty",placeholder:"Reserved Qty",variant:"underlined",type:"number"},null,8,["modelValue"])]),_:1}),e(a,{cols:"6"},{default:t(()=>[e(f,{modelValue:o.value.in_transit_qty,"onUpdate:modelValue":d[11]||(d[11]=n=>o.value.in_transit_qty=n),label:"In Transit Qty",placeholder:"In Transit Qty",variant:"underlined",type:"number"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(a,{cols:"12",class:"d-flex gap-4"},{default:t(()=>[e(P,{type:"submit",onClick:l},{default:t(()=>[T(" Submit ")]),_:1}),e(P,{type:"reset",color:"secondary",variant:"tonal"},{default:t(()=>[T(" Reset ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},Pe={__name:"ProductEdit",props:["product"],setup(p){const m=p;let s=m.product;const o=A(),i=M();F(async()=>{await i.updateCategoryList(),await i.updateProductTypeList(),await i.updateUnitTypeList()});const b={name:s.name,category_id:s.category_id,product_type_id:s.product_type_id,unit_amount:s.unit_amount,unit_id:s.unit_id,description:s.description,selling_price:s.selling_price,cost_adjust_type:s.cost_adjust_type==1,cost:s.cost,available_qty:s.available_qty,reserved_qty:s.reserved_qty,in_transit_qty:s.in_transit_qty},l=g(structuredClone(b)),c=g(b.category_id),n=g((()=>{let v=i.productTypes;return v=v.filter(u=>u.category_id===c.value),v=v.map(u=>({title:u.name,value:u.product_type_id})),v})());z(c,v=>{let u=i.productTypes;l.value.category_id=v,u=u.filter(r=>r.category_id===v),u=u.map(r=>({title:r.name,value:r.product_type_id})),l.value.product_type_id=null,n.value=u});const j=async()=>{try{const v=G.editProduct+"/"+m.product.product_id,u=await Z.put(v,l.value);await o.updateProductList(),o.editModalStatus=!1}catch(v){console.log(v)}};return(v,u)=>(U(),S(V,{justify:"center"},{default:t(()=>[e(a,{cols:"12",md:"10"},{default:t(()=>[e($,{title:"Add Product"},{default:t(()=>[e(E,null,{default:t(()=>[e(H,{onSubmit:u[12]||(u[12]=Y(()=>{},["prevent"]))},{default:t(()=>[e(V,null,{default:t(()=>[e(a,{cols:"12",md:"2"},{default:t(()=>[e(W,{width:"100%",src:"https://images.pexels.com/photos/90946/pexels-photo-90946.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"}),e(P,{justify:"center",width:"100%",class:"mt-3"},{default:t(()=>[T(" Upload ")]),_:1})]),_:1}),e(a,{cols:"12",md:"5"},{default:t(()=>[e(a,{cols:"12"},{default:t(()=>[e(f,{modelValue:l.value.name,"onUpdate:modelValue":u[0]||(u[0]=r=>l.value.name=r),label:"Product Name",placeholder:"Product Name",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(a,{cols:"12"},{default:t(()=>[e(x,{modelValue:c.value,"onUpdate:modelValue":u[1]||(u[1]=r=>c.value=r),items:y(i).getCategoriesSelect,label:"Category",placeholder:"Category",variant:"underlined"},null,8,["modelValue","items"])]),_:1}),e(a,{cols:"12"},{default:t(()=>[e(x,{modelValue:l.value.product_type_id,"onUpdate:modelValue":u[2]||(u[2]=r=>l.value.product_type_id=r),items:n.value,label:"Product Type",placeholder:"Product Type",variant:"underlined"},null,8,["modelValue","items"])]),_:1}),e(a,{cols:"12"},{default:t(()=>[e(V,null,{default:t(()=>[e(a,{cols:"6"},{default:t(()=>[e(f,{modelValue:l.value.unit_amount,"onUpdate:modelValue":u[3]||(u[3]=r=>l.value.unit_amount=r),label:"Unit Amount",placeholder:"Unit Amount",variant:"underlined",type:"number"},null,8,["modelValue"])]),_:1}),e(a,{cols:"6"},{default:t(()=>[e(x,{modelValue:l.value.unit_id,"onUpdate:modelValue":u[4]||(u[4]=r=>l.value.unit_id=r),items:y(i).getUnitTypeSelect,label:"Unit Type",placeholder:"Unit Type",variant:"underlined"},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1}),e(a,{cols:"12"},{default:t(()=>[e(J,{modelValue:l.value.description,"onUpdate:modelValue":u[5]||(u[5]=r=>l.value.description=r),label:"Description",placeholder:"Description",variant:"underlined"},null,8,["modelValue"])]),_:1})]),_:1}),e(a,{cols:"12",md:"5"},{default:t(()=>[e(a,{cols:"12"},{default:t(()=>[e(V,null,{default:t(()=>[e(a,{cols:"6"},{default:t(()=>[e(f,{modelValue:l.value.selling_price,"onUpdate:modelValue":u[6]||(u[6]=r=>l.value.selling_price=r),label:"Selling Price",placeholder:"Selling Price",variant:"underlined",type:"number"},null,8,["modelValue"])]),_:1}),e(a,{cols:"6"},{default:t(()=>[e(K,{modelValue:l.value.cost_adjust_type,"onUpdate:modelValue":u[7]||(u[7]=r=>l.value.cost_adjust_type=r),label:"Adjust",variant:"underlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(a,{cols:"12"},{default:t(()=>[e(V,null,{default:t(()=>[e(a,{cols:"6"},{default:t(()=>[e(f,{modelValue:l.value.cost,"onUpdate:modelValue":u[8]||(u[8]=r=>l.value.cost=r),label:"Cost",placeholder:"Cost",variant:"underlined",type:"number"},null,8,["modelValue"])]),_:1}),e(a,{cols:"6"},{default:t(()=>[e(f,{modelValue:l.value.available_qty,"onUpdate:modelValue":u[9]||(u[9]=r=>l.value.available_qty=r),label:"Available Qty",placeholder:"Available Qty",variant:"underlined",type:"number"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(a,{cols:"12"},{default:t(()=>[e(V,null,{default:t(()=>[e(a,{cols:"6"},{default:t(()=>[e(f,{modelValue:l.value.reserved_qty,"onUpdate:modelValue":u[10]||(u[10]=r=>l.value.reserved_qty=r),label:"Reserved Qty",placeholder:"Reserved Qty",variant:"underlined",type:"number"},null,8,["modelValue"])]),_:1}),e(a,{cols:"6"},{default:t(()=>[e(f,{modelValue:l.value.in_transit_qty,"onUpdate:modelValue":u[11]||(u[11]=r=>l.value.in_transit_qty=r),label:"In Transit Qty",placeholder:"In Transit Qty",variant:"underlined",type:"number"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(a,{cols:"12",class:"d-flex gap-4"},{default:t(()=>[e(P,{type:"submit",onClick:j},{default:t(()=>[T(" Submit ")]),_:1}),e(P,{type:"reset",color:"secondary",variant:"tonal"},{default:t(()=>[T(" Reset ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},Te=_("thead",null,[_("tr",null,[_("th",{class:"text-uppercase"}," Name "),_("th",{class:"text-center text-uppercase"}," Product Type "),_("th",{class:"text-center text-uppercase"}," Quantity "),_("th",{class:"text-center text-uppercase"}," Selling Price "),_("th",{class:"text-center text-uppercase"}," Cost "),_("th",{class:"text-center text-uppercase"}," Action ")])],-1),xe={class:"text-center"},Se={class:"text-center"},we={class:"text-center"},ke={class:"text-center"},he={class:"text-center"},qe={__name:"ProductTable",setup(p){let m=ye();const s=A();g(!1);const o=g(null);return(i,b)=>(U(),L(N,null,[e(Ve,null,{default:t(()=>[Te,_("tbody",null,[(U(!0),L(N,null,fe(y(s).productList,l=>(U(),L("tr",{key:l.product_id},[_("td",null,C(l.name)+" - "+C(l.unit_amount)+C(l.unit),1),_("td",xe,C(l.product_type),1),_("td",Se,C(l.available_qty),1),_("td",we,C(l.selling_price),1),_("td",ke,[h(_("span",null,C(l.cost),513),[[q,y(m).can("product-cost-view")]])]),_("td",he,[l.status?h((U(),S(Q,{key:0,size:"20",start:"",icon:"fa-regular:eye",onClick:c=>y(s).inactiveProduct(l.product_id)},null,8,["onClick"])),[[q,y(m).can("product-edit")]]):h((U(),S(Q,{key:1,size:"20",start:"",icon:"oui:eye-closed",onClick:c=>y(s).inactiveProduct(l.product_id)},null,8,["onClick"])),[[q,y(m).can("product-edit")]]),h(e(Q,{size:"20",start:"",icon:"tabler:edit",onClick:c=>{o.value=l,y(s).editModalStatus=!0}},null,8,["onClick"]),[[q,y(m).can("product-edit")]])])]))),128))])]),_:1}),e(Ce,{modelValue:y(s).editModalStatus,"onUpdate:modelValue":b[0]||(b[0]=l=>y(s).editModalStatus=l),width:"auto"},{default:t(()=>[e(Pe,{product:o.value},null,8,["product"])]),_:1},8,["modelValue"])],64))}},Ne={__name:"ProductList",setup(p){return A(),(m,s)=>(U(),S(V,{justify:"center"},{default:t(()=>[e(a,{cols:"12"},{default:t(()=>[e($,{title:"Basic"},{default:t(()=>[e(qe)]),_:1})]),_:1})]),_:1}))}};export{Re as _,Ne as a};
